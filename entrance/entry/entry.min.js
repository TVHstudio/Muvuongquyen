function GDSDKGamedreamerLoginListenerOnLogin(t,e){var r=window.platform;r.pfParam.openId=t.userId,r.openSelectServer()}function GDSDKGamedreamerServerListOnServerList(t){console.log("GDSDKGamedreamerServerListOnServerList-----------------"+t)}function GDSDKGamedreamerPayListenerOnPayResult(t,e){t&&window.GameMain.payCallback(t,e),console.log("GDSDKGamedreamerPayListenerOnPayResult----------------------------"+t+"=="+e)}function GDSDKGamedreamerMemberListenerOnLogout(t){location.reload()}function GDSDKH5GameLog(t){console.log("GDSDKH5GameLog----------"+t)}function GDSDKGamedreamerCheckServerListenerOnCheckServer(t){console.log("GDSDKGamedreamerCheckServerListenerOnCheckServer----------"+t)}function GDSDKSessionExpire(){location.reload()}var __reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__awaiter=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=Promise))(function(n,o){function a(t){try{l(i.next(t))}catch(e){o(e)}}function s(t){try{l(i["throw"](t))}catch(e){o(e)}}function l(t){t.done?n(t.value):new r(function(e){e(t.value)}).then(a,s)}l((i=i.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function r(t){return function(e){return i([t,e])}}function i(r){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,o&&(a=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[0,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return l.label++,{value:r[1],done:!1};case 5:l.label++,o=r[1],r=[0];continue;case 7:r=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){l=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){l.label=r[1];break}if(6===r[0]&&l.label<a[1]){l.label=a[1],a=r;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(r);break}a[2]&&l.ops.pop(),l.trys.pop();continue}r=e.call(t,l)}catch(i){r=[6,i],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n,o,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),"throw":r(1),"return":r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},__extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);r.prototype=e.prototype,t.prototype=new r},PlatFormBase=function(){function t(){this.pfId="",this.domain="",this.isShare=!1,this.isFocus=!1}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.updateCurServer=function(t){},t.prototype.start=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.main=t,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig(EntranceParam.urlParam.entryHosts+"icon/entry.res.json","/"),[2]})})},t.prototype.onConfigComplete=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),[4,this.init()];case 1:return t.sent(),this.openBgWin(),[2]}})})},t.prototype.openBgWin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.openSelectServer=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.closeSelectServer=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.closeLoadingWin=function(){},t.prototype.checkStartGame=function(){return!0},t.prototype.getHttp=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,Http.get(t)]})})},t.prototype.getTabListUrl=function(){return""},t.prototype.getGonggaoUrl=function(){return""},t.prototype.getServerListUrl=function(t){return""},t.prototype.getRechargeStateUrl=function(){return""},t.prototype.getVerDataUrl=function(){return EntranceParam.urlParam.hosts+"ver"+("/"+EntranceParam.urlParam.v+"/"+EntranceParam.urlParam.v+".json")},t.prototype.showLoadProgress=function(t,e){console.log("showLoadProgress")},t.prototype.showRecharge=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return console.log("showRecharge"),[2]})})},t.prototype.checkShowRecharge=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(r){switch(r.label){case 0:return t=this.getRechargeStateUrl(),t?[4,this.getHttp(t)]:[3,2];case 1:return e=r.sent(),"1"==e?[2,!0]:(alert(LangEntry.str12),[2,!1]);case 2:return[2,!0];case 3:return[2]}})})},t.prototype.showGame=function(){console.log("showGame")},t.prototype.createRole=function(t){console.log("createRole")},t.prototype.selectRole=function(t){console.log("selectRole")},t.prototype.enterGame=function(t){console.log("enterGame")},t.prototype.firstEnterGame=function(t){console.log("firstEnterGame")},t.prototype.roleUp=function(t){console.log("roleUp")},t.prototype.powerUp=function(t){console.log("powerUp")},t.prototype.sendService=function(t){console.log("sendService")},t.prototype.verifySuccess=function(){console.log("verifySuccess")},t.prototype.showVerify=function(t){console.log("showVerify")},t.prototype.getVerifyInfo=function(t,e){console.log("getVerifyInfo")},t.prototype.isCustomerBtn=function(t){console.log("isCustomerBtn")},t.prototype.showShare=function(){console.log("showShare:")},t.prototype.requestInviteInfo=function(){console.log("requestInviteInfo")},t.prototype.getSceneType=function(){console.log("getSceneType")},t.prototype.isOpenShare=function(t){console.log("isOpenShare:")},t.prototype.setShareCallback=function(t){console.log("setShareCallback:")},t.prototype.isOpenFocus=function(t){console.log("isOpenFocus:")},t.prototype.showQrCode=function(){console.log("showQrCode:")},t.prototype.checkChat=function(t){t.onSuccessCallback(t.chat_content)},t.prototype.checkLogout=function(){console.log("checkLogout:")},t.prototype.logout=function(t){console.log("logout:")},t.prototype.isLiuhai=function(){return!1},t.prototype.isShowLogo=function(){return!0},t.prototype.isShowISBN=function(){return!0},t.prototype.getBgName=function(){return"bg.jpg"},t.prototype.call=function(t,e,r){return window.funcName?window.funcName(t,r):void 0},t.prototype.getVirtualUrl=function(t){if(EntranceParam.hasVer())if(EntranceParam.has(t)){var e=EntranceParam.getDir(t);EntranceParam.getVer(t);t=EntranceParam.urlParam.hosts+"ver/"+e+"/"+t}else t=EntranceParam.urlParam.hosts+"ver/0/"+t;else t=""+EntranceParam.urlParam.hosts+t;return t},t.prototype.getConfig=function(){return RES.getRes("cfg_json")},t.prototype.loadGroup=function(t){ResUtil.ins().loadGroup(t.type,t.onSuccess,t.onProgress,this,t.retryCount)},t.prototype.loadTheme=function(t,e){var r=this;window.loadSingleScript(this.getVirtualUrl(t),function(){var i=new eui.Theme(t,r.main.stage);i.addEventListener(eui.UIEvent.COMPLETE,function(){e()},r)})},t.prototype.loadResConfig=function(t,e,r){ResUtil.ins().loadConfig(t,e,r,null)},t.prototype.isShowRecharge=function(){return!0},t.prototype.relogin=function(){location.reload(!0)},t}();__reflect(PlatFormBase.prototype,"PlatFormBase",["Platform"]),window.PlatFormBase=PlatFormBase;var PlatFormParam=function(){function t(){this.openId="",this.mineKey={},this.keys=["openId"]}return t.prototype.addMineKey=function(t,e){this.mineKey[t]=e},t.prototype.getKey=function(t){return this.mineKey[t]||t},t.prototype.setValueByUrl=function(t){var e=t.split("?");this.url=e[0];var r=e[1];if(r)for(var i=r.split("&"),n=0;n<i.length;n++){var o=i[n].split("="),a=o[0],s=o[1];this[a]=s}else console.log("url:"+t+"没有带参数")},t.prototype.toParamString=function(){for(var t="",e=0,r=this.keys;e<r.length;e++){var i=r[e],n=this.getKey(i),o=this[i];o&&(t+="&"+n+"="+o)}return t.length&&"&"==t[0]&&(t=t.slice(1,t.length)),t},t}();__reflect(PlatFormParam.prototype,"PlatFormParam"),window.PlatFormParam=PlatFormParam;var PlatFormWW=function(t){function e(){var e=t.call(this)||this;return e.pfParam=new PlatFormParam,e.serverListData=new ServerListData,e}return __extends(e,t),e.prototype.test=function(t){void 0===t&&(t=""),this.pfParam.openId=t.toString(),this.openSelectServer()},e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.initWin(),[2]})})},e.prototype.initWin=function(){this.serverBgWin=new ServerBgWin,this.serverWin=new ServerWin,this.loadingWin=new ServerLoadingWin,this.serverTipsWin=new ServerTipsWin},e.prototype.openBgWin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.main.addChild(this.serverBgWin),this.serverBgWin.open(),[2]})})},e.prototype.openSelectServer=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(r){switch(r.label){case 0:return[4,this.getHttp(this.getTabListUrl())];case 1:return t=r.sent(),e=JSON.parse(t),this.serverListData.setDataByObject(e),1!=e.isnew&&"1"!=e.isnew||!this.serverListData.defaultserver.canEnter?(this.main.addChild(this.serverWin),this.serverWin.open(this.serverListData,this.callback,this)):this.callback(this.serverListData.defaultserver),[2]}})})},e.prototype.callback=function(t){return __awaiter(this,void 0,void 0,function(){var e,r,i,n,o,a,s,l,c=this;return __generator(this,function(h){switch(h.label){case 0:return[4,this.getHttp(this.getLoginfoUrl(t.server_id))];case 1:return e=h.sent(),e=e.replace(/[\s\\]/g,""),r=JSON.parse(e),i=r.code,"-1"==i?(n=r.msg,alert("#"+n||LangEntry.str13),this.serverWin.parent||(this.main.addChild(this.serverWin),this.serverWin.open(this.serverListData,this.callback,this)),this.serverWin.setClickEnable(!0),[2]):(o=EntranceParam.urlParam.v,[4,this.setLoginParam(r)]);case 2:return h.sent(),this.closeSelectServer(),this.loadingWin=new ServerLoadingWin,this.main.addChild(this.loadingWin),this.loadingWin.open(),window.isDebug||window.isTest?(this.loginGame(),[2]):window.GameMain?(EntranceParam.urlParam.v===o?window.GameMain.relogin():alert(LangEntry.str11),[2]):(a="main.min.js",EntranceParam.verData?(l=EntranceParam.getVer(a)||0,s=EntranceParam.urlParam.hosts+"ver/"+l+"/"+a):s=""+EntranceParam.urlParam.hosts+a,window.loadSingleScript(s,function(){c.loginGame()}),[2])}})})},e.prototype.setLoginParam=function(t){return __awaiter(this,void 0,void 0,function(){var e,r,i,n,o,a,s,l;return __generator(this,function(c){switch(c.label){case 0:for(this.setV(t.v),EntranceParam.setKeyValue("isnew",t.isnew),EntranceParam.setKeyValue("openId",t.openId),EntranceParam.setKeyValue("openKey",t.openKey),EntranceParam.setKeyValue("nickName",t.nickName),EntranceParam.setKeyValue("serverName",t.serverName),e=t.flashUrl,r=e.split("?")[1],i=r.split("&"),n={},o=0;o<i.length;o++)a=i[o].split("="),s=a[0],l=a[1],n[s]=l;return EntranceParam.setKeyValue("isBan",n.isBan),EntranceParam.setKeyValue("srvid",n.srvid),EntranceParam.setKeyValue("serverid",n.serverid),EntranceParam.setKeyValue("srvaddr",n.srvaddr),EntranceParam.setKeyValue("srvport",n.srvport),EntranceParam.setKeyValue("roleCount",n.roleCount),EntranceParam.setKeyValue("login_ip",n.login_ip),EntranceParam.setKeyValue("loadurl",n.loadurl),EntranceParam.setKeyValue("user",n.user),EntranceParam.setKeyValue("spverify",n.spverify),EntranceParam.setKeyValue("pf",n.pf),EntranceParam.setKeyValue("pfid",n.pfid),EntranceParam.setKeyValue("appid",n.appid),EntranceParam.setKeyValue("nickname",n.nickname),[4,this.setVerData()];case 1:return c.sent(),[2]}})})},e.prototype.setV=function(t){EntranceParam.setKeyValue("v",t)},e.prototype.setVerData=function(){return __awaiter(this,void 0,void 0,function(){var t,e,r;return __generator(this,function(i){switch(i.label){case 0:return t=EntranceParam,r=(e=JSON).parse,[4,this.getHttp(this.getVerDataUrl())];case 1:return t.verData=r.apply(e,[i.sent()]),[2]}})})},e.prototype.loginGame=function(){window.GameMain.login()},e.prototype.closeSelectServer=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.serverWin.close(),[2]})})},e.prototype.updateCurServer=function(t){this.serverWin.updateCurServer(t)},e.prototype.getTabListUrl=function(){return""+this.domain+this.pfId+"/login/serverlabel?"+this.pfParam.toParamString()},e.prototype.getServerListUrl=function(t){return""+this.domain+this.pfId+"/login/getserverlist?"+this.pfParam.toParamString()+"&"+t.toParamString()},e.prototype.getLoginfoUrl=function(t){return""+this.domain+this.pfId+"/login/getlogininfo?"+this.pfParam.toParamString()+"&serverId="+t},e.prototype.getGonggaoUrl=function(){return""+this.domain+this.pfId+"/api/notice?"+this.pfParam.toParamString()},e.prototype.getRechargeStateUrl=function(){return""+this.domain+this.pfId+"/api/rechargestatus?"+this.pfParam.toParamString()+"&serverId="+EntranceParam.urlParam.srvid},e.prototype.closeLoadingWin=function(){this.loadingWin&&(this.loadingWin.close(),this.loadingWin=null)},e.prototype.showLoadProgress=function(t,e){t>>=0,console.log(""+e+t+"%"),this.loadingWin&&this.loadingWin.showLoadProgress(t,e)},e.prototype.showGame=function(){console.log("showGame"),this.loadingWin&&(this.loadingWin.close(),this.loadingWin=null),this.serverWin&&(this.serverWin.close(),this.serverWin=null),this.serverBgWin&&(this.serverBgWin.close(),this.serverBgWin=null),this.serverTipsWin&&(this.serverTipsWin.close(),this.serverTipsWin=null)},e}(PlatFormBase);__reflect(PlatFormWW.prototype,"PlatFormWW"),window.PlatFormWW=PlatFormWW;var PlatFormTWBase=function(t){function e(){var e=t.call(this)||this;return e.gamecode="GUGZ",e.domain="https://gugz-login.gamedreamer.com/",e.pfParam=new TWLoginParam,e}return __extends(e,t),e.prototype.test=function(e){void 0===e&&(e="200933887216"),t.prototype.test.call(this,e)},e.prototype.getLoginfoUrl=function(t){var e=""+this.domain+this.pfId+"/login/getlogininfo?"+this.pfParam.toParamString()+"&serverId="+t;return e},e.prototype.getTabListUrl=function(){return""+this.domain+this.pfId+"/login/getserverlist?"+this.pfParam.toParamString()},e.prototype.getGonggaoUrl=function(){return""+this.domain+this.pfId+"/api/notice"},e}(PlatFormWW);__reflect(PlatFormTWBase.prototype,"PlatFormTWBase");var TWLoginParam=function(t){function e(){var e=t.call(this)||this;return e.appid="0",e.keys=["openId","appid"],e}return __extends(e,t),e}(PlatFormParam);__reflect(TWLoginParam.prototype,"TWLoginParam");var UserInfo=function(){function t(){}return t}();__reflect(UserInfo.prototype,"UserInfo"),window.PlatFormTWBase=PlatFormTWBase;var BaseWinEntry=function(t){function e(){var e=t.call(this)||this;return e.shapeAlpha=.5,e.event=[],e.initUI(),e}return __extends(e,t),e.prototype.initUI=function(){this.group=new eui.Group,this.group.width=720,this.group.height=1280,this.group.horizontalCenter=0,this.addChild(this.group)},e.prototype.addBg=function(t){void 0===t&&(t=.5),this.shapeBg||(this.shapeAlpha=t,this.shapeBg=new egret.Shape,this.shapeBg.graphics.beginFill(0,t),this.shapeBg.graphics.drawRect(0,0,egret.MainContext.instance.stage.stageWidth,egret.MainContext.instance.stage.stageHeight),this.shapeBg.graphics.endFill(),this.addChildAt(this.shapeBg,0))},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.onStageResize(),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onStageResize,this)},e.prototype.close=function(){this.removeEs(),egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onStageResize,this),this.parent&&this.parent.removeChild(this)},e.prototype.onStageResize=function(){this.shapeBg&&(this.shapeBg.graphics.clear(),this.removeChild(this.shapeBg),this.shapeBg=null,this.addBg(this.shapeAlpha))},e.prototype.addClickE=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_TAP,t,e)},e.prototype.addClickEndE=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_END,t,e)},e.prototype.addClickBeginE=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_BEGIN,t,e)},e.prototype.addChangeE=function(t,e){this.addEvent(egret.TouchEvent.CHANGE,t,e)},e.prototype.addChangingE=function(t,e){this.addEvent(egret.TouchEvent.CHANGING,t,e)},e.prototype.addItemTapE=function(t,e){this.addEvent(eui.ItemTapEvent.ITEM_TAP,t,e)},e.prototype.addLinkE=function(t,e){this.addEvent(egret.TextEvent.LINK,t,e)},e.prototype.addEvent=function(t,e,r){if(!e)return void console.log(egret.getQualifiedClassName(this)+"不存在绑定的显示对象，BaseView.addEvent");for(var i=!1,n=0,o=this.event;n<o.length;n++){var a=o[n];if(t==a[0]&&e==a[2]&&r==a[1]){i=!0;break}}i||(e.addEventListener(t,r,this),this.event.push([t,r,e]))},e.prototype.removeClickE=function(t,e){for(var r=0;r<this.event.length;r++){var i=this.event[r];if(t==i[2]&&i[0]==egret.TouchEvent.TOUCH_TAP&&i[1]==e)return t.removeEventListener(i[0],e,this),void this.event.splice(r,1)}},e.prototype.removeEs=function(){for(var t=0,e=this.event;t<e.length;t++){var r=e[t];r[2].removeEventListener(r[0],r[1],this),r[2].hasEventListener(r[0]),!1}this.event.length=0},e.prototype.createEuiImage=function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var n=new eui.Image;return n.x=r,n.y=i,n.source=e,t.addChild(n),n},e.prototype.createEuiLabelText=function(t,e,r,i,n){void 0===r&&(r=0),void 0===i&&(i=0);var o=new eui.Label;return o.x=r,o.y=i,o.textFlow=this.addColorTF(e),o.size=n,o.fontFamily="黑体",t&&t.addChild(o),o},e.prototype.createEuiTextInput=function(t,e,r,i,n){void 0===e&&(e=0),void 0===r&&(r=0);var o=new eui.EditableText;return o.x=e,o.y=r,o.width=i,o.height=n,t.addChild(o),o},e.prototype.addColorTF=function(t,e,r){return void 0===r&&(r=!1),r&&(t=this.addUnderLine(t.toString())),e?(new egret.HtmlTextParser).parser(this.addColor(t.toString(),e)):(new egret.HtmlTextParser).parser(t.toString())},e.prototype.addColor=function(t,e){var r;return"string"==typeof e?r=String(e):"number"==typeof e&&(r=Number(e).toString(10)),'<font color="'+r+'">'+t+"</font>"},e.prototype.addUnderLine=function(t){return"<u>"+t+"</u>"},e}(eui.UILayer);__reflect(BaseWinEntry.prototype,"BaseWinEntry"),window.BaseWinEntry=BaseWinEntry;var PlatFormQuickBase=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t.prototype.init.call(this),this.pfParam.openId=egret.getOption("openId")||window.openId,[2]})})},e.prototype.openBgWin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t.prototype.openBgWin.call(this),this.openSelectServer(),[2]})})},e.prototype.openSelectServer=function(){return __awaiter(this,void 0,void 0,function(){var e,r;return __generator(this,function(i){return this.domain=this.main.getPf(this.pfId).domain,e=egret.getOption("serverId"),e?(r=new ServerData,r.server_id=e,this.callback(r)):t.prototype.openSelectServer.call(this),[2]})})},e.prototype.setV=function(t){},e.prototype.setVerData=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e.prototype.showRecharge=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return window.GameMain.showRecharge(t,e),[2]})})},e}(PlatFormWW);__reflect(PlatFormQuickBase.prototype,"PlatFormQuickBase"),window.PlatFormQuickBase=PlatFormQuickBase;var ZSMK2RechargeParams=function(){function t(){}return t}();__reflect(ZSMK2RechargeParams.prototype,"ZSMK2RechargeParams");var ZSMK2ReportParam=function(){function t(){}return t}();__reflect(ZSMK2ReportParam.prototype,"ZSMK2ReportParam");var ZSMK2LoginData=function(){function t(){}return t}();__reflect(ZSMK2LoginData.prototype,"ZSMK2LoginData");var ShareInfoMK2=function(){function t(){}return t}();__reflect(ShareInfoMK2.prototype,"ShareInfoMK2");var VerifyRes=function(){function t(){this.isOpenVerify=0,this.status=0,this.isOpenIndulge=0,this.channelVerifyData=new ChannelVerifyData}return t}();__reflect(VerifyRes.prototype,"VerifyRes");var VerifyDataPHP=function(){function t(){this.code=1,this.msg="",this.data=0,this.isOpenIndulge=0}return t}();__reflect(VerifyDataPHP.prototype,"VerifyDataPHP");var ChannelVerifyData=function(){function t(){}return t}();__reflect(ChannelVerifyData.prototype,"ChannelVerifyData");var ZSMK2LoginParams=function(t){function e(){var e=t.call(this)||this;return e.keys=["openId","passId"],e.addMineKey("passId","appid"),e}return __extends(e,t),e.prototype.setData=function(t){this.passId=t.passId,this.openId=t.openId},e}(PlatFormParam);__reflect(ZSMK2LoginParams.prototype,"ZSMK2LoginParams");var ChatParamMK2=function(){function t(){}return t}();__reflect(ChatParamMK2.prototype,"ChatParamMK2",["IChatParam"]);var PlatFormZSMK2=function(t){function e(){var e=t.call(this)||this;return e.domain="https://loginpayzy.h5eco.com/",e.pfParam=new ZSMK2LoginParams,e}return __extends(e,t),e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(r){return t.prototype.init.call(this),this.pfParam.setValueByUrl(location.href),window.loadSingleScript("https://passcdn.mengkegame.cn/pass4/js/jssdk/h5sdk.js",function(){}),e=this,window.__sdkready=function(){var t=this.pfParam,r=new ShareInfoMK2;r={title:"卓越传说",imgUrl:ResEntrance.getResSource("shareicon.png"),desc:"闯关就得vip，百万钻石送不停。",openId:t.openId,status:EntranceParam.urlParam.srvid};var i=e.getH5gamecn();i._init({getServerCallBack:function(t,e,r,i){0==t?console.log("loginCallBack选区"):1==t?console.log("loginCallBack直接进入游戏"):2==t&&console.log("loginCallBack维护")},enterCallBack:function(t,e){1==t?console.log("enterCallBack 直接进入游戏"):2==t&&console.log("enterCallBack 维护")},shareInfo:r,popWindow:function(t){console.log("弹出提示："+t.msg)},shareIconCallBack:function(t){console.log("shareIconCallBack",t),t.backicon},version:10}),t.passId&&EntranceParam.setKeyValue("appid",t.passId),e.openSelectServer()}.bind(this),[2]})})},e.prototype.showRecharge=function(t,e){return __awaiter(this,void 0,void 0,function(){var r,i,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge()];case 1:return r=o.sent(),r&&(t?(i=e.actorId+"_"+new Date(e.serverTime).valueOf(),n=new ZSMK2RechargeParams,n.money=t.amount,n.gameOrderId=i,n.openId=EntranceParam.urlParam.openId,n.roleId=e.actorId,n.roleName=e.actorName,n.roleLevel=e.actorLevel,n.serverId=EntranceParam.urlParam.srvid,n.serverName=EntranceParam.urlParam.serverName,n.goodsName=t.itemName,n.goodsDesc=t.desc,n.goodsId=t.yb,n.ext=e.actorId+"|"+t.yb,this.getH5gamecn().pay(t.amount,n)):alert("错误的购买道具")),[2]}})})},e.prototype.createRole=function(t){this.reportSDK("","create_role",t)},e.prototype.enterGame=function(t){this.reportSDK("","login",t)},e.prototype.roleUp=function(t){t.actorLevel%100==0&&this.reportSDK("","levelup",t)},e.prototype.powerUp=function(t){this.reportSDK("","power",t)},e.prototype.getVerifyInfo=function(t,e){var r=this;this.getH5gamecn().getVerifyInfo(function(i){if(console.log("防沉迷数据:"+i),t(i.isOpenVerify?i.status:-1),i.isOpenIndulge){var n=i.channelVerifyData,o=""+r.domain+r.pfId+"/login/getFcmInfo?"+r.pfParam.toParamString()+"\n						&birthday="+n.birthday+"\n						&holiday_limit_minutes="+n.holiday_limit_minutes+"\n						&visiter_limit_day="+n.visiter_limit_day+"\n						&limit_age="+n.limit_age+"\n						&limit_login_time_end="+n.limit_login_time_end+"\n						&is_verify="+n.is_verify+"\n						&visiter_limit_minutes="+n.visiter_limit_minutes+"\n						&limit_login_time_start="+n.limit_login_time_start+"\n						&work_day_limit_minutes="+n.work_day_limit_minutes+"\n						&card_no="+n.card_no+"\n						&is_anti_indulge="+n.is_anti_indulge+"\n						&is_visiter="+n.is_visiter+"\n						&age="+n.age;console.log("防沉迷url:"+o);var a=new HttpRequester,s=function(t){var r=JSON.parse(t.target.response);r.isOpenIndulge=i.isOpenIndulge,e(r)};a.open(o,egret.HttpMethod.GET,s,s),a.send()}else console.log("防沉迷未开启")})},e.prototype.showVerify=function(t){this.getH5gamecn().showVerify(t)},e.prototype.isCustomerBtn=function(t){this.getH5gamecn().isCustomerBtn(function(e){t(e.show)})},e.prototype.showShare=function(){var t={title:"",imgUrl:"",query:""};this.getH5gamecn().showShare(t)},e.prototype.isOpenShare=function(t){this.getH5gamecn().isOpenShare(t)},e.prototype.setShareCallback=function(t){this.getH5gamecn().setShareCallback(t)},e.prototype.showQrCode=function(){this.getH5gamecn().showQrCode()},e.prototype.isOpenFocus=function(t){var e={appId:EntranceParam.urlParam.appid,openId:EntranceParam.urlParam.openId,openKey:EntranceParam.urlParam.openKey};this.getH5gamecn().getFocusState(e,t)},e.prototype.checkChat=function(t){try{var e=this.copyKey(t,ChatParamMK2);this.getH5gamecn().checkChat(e,function(e){var r="";"success"==e.result?t.onSuccessCallback(e.content):"fail"==e.result?r="网络异常":"verify_fail"==e.result?(-1==e.code?r="您输入的文字中有违禁词汇,请重新编辑！":-2==e.code?r="您已被禁言!":-3==e.code&&(r="平台错误码-3"),t.onFailCallback(r)):"self"==e.result?console.log("checkChat返回类型:self"):console.log("checkChat返回类型错误:"+e.result)})}catch(r){t.onSuccessCallback(t.chat_content),console.log("checkChat错误:"+r)}},e.prototype.sendService=function(t){var e="https://loginpayzy.h5eco.com/"+this.pfId+"/api?m=player&fn=sendHttp&game="+EntranceParam.urlParam.srvid+"&userId="+t.actorId+"&userName="+EntranceParam.urlParam.openId+"&userNameCn="+t.actorName+"&userLevel="+t.actorLevel+"&vipLevel="+(t.vipLevel+t.svipLevel)+"&content="+t.content+"&appId="+this.pfId+"&passId="+this.pfParam.passId,r=new HttpRequester,i=function(e){var r=e.target.response;1===r||"1"===r?t.onSuccessCallback():t.onFailCallback()};r.open(e,egret.HttpMethod.GET,i,i),r.send()},e.prototype.logout=function(t){this.reportSDK("","logout",t),this.getH5gamecn().logout()},e.prototype.reportSDK=function(t,e,r){var i=this.getReportParam(t,e,r);this.getH5gamecn().reportData(i)},e.prototype.getReportParam=function(t,e,r){var i=new ZSMK2ReportParam;return i.action=e,i.app_openid=t,i.server=EntranceParam.urlParam.srvid,i.serverName=EntranceParam.urlParam.serverName,i.openId=EntranceParam.urlParam.openId,i.nickName=EntranceParam.urlParam.nickName,i.roleId=r.actorId,i.roleName=r.actorName,i.level=r.actorLevel,i.power=r.power,i.vip=r.vipLevel+r.svipLevel,i.partyName=r.guildName,i.balance=r.yb,i.relifeLevel=r.zsName,i.creatRoleTime=r.creatRoleTime,i},e.prototype.reportPaySDK=function(t,e,r,i){var n=this.getReportParam(t,e,r);n.money=i.amount,n.productId=i.yb,this.getH5gamecn().reportData(n)},e.prototype.getH5gamecn=function(){return window.h5gamecn},e.prototype.copyKey=function(t,e){var r=new e;for(var i in t){var n=t[i];if("function"!=typeof n){var o=i;r[o]=n}}return r},e.prototype.isLiuhai=function(){return EntranceParam.urlParam.appid==QdId.xianlai},e.prototype.isShowLogo=function(){return EntranceParam.urlParam.appid!=QdId.qd20072},e.prototype.isShowISBN=function(){return EntranceParam.urlParam.appid!=QdId.qd20072},e}(PlatFormWW);__reflect(PlatFormZSMK2.prototype,"PlatFormZSMK2"),window.PlatFormZSMK2=PlatFormZSMK2;var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,r,i){function n(t){e.call(i,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),r.call(i))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(i,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,r){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(i,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var s=t.split("/");s.pop();var l=s.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(i,generateJSON.paths[t])},this):RES.getResByUrl(l,function(r){window.JSONParseClass.setData(r),egret.callLater(function(){e.call(i,generateJSON.paths[t])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(i,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,r){function i(i){e.call(r,i,t)}if(RES.hasRes(t)){var n=RES.getRes(t);n?i(n):RES.getResAsync(t,i,this)}else RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var LoginDebugWin=function(t){function e(){var e=t.call(this)||this;return e.group0=new eui.Group,e.group1=new eui.Group,e.group2=new eui.Group,e.group3=new eui.Group,e.isShowFPS=!1,e.imgLoaderTitle=new egret.ImageLoader,e.imgLoaderBg=new egret.ImageLoader,e}return __extends(e,t),e.prototype.initUI1=function(){this.width=720,this.height=1280,this.left=0,this.right=0,this.imgBg=new eui.Image,this.imgBg.source="",this.imgBg.left=0,this.imgBg.right=0,this.imgBg.top=0,this.imgBg.bottom=0,this.addChild(this.imgBg),this.group1.width=this.width,this.group1.y=10,this.group1.touchEnabled=!1,this.group2.touchEnabled=!1,this.group0.width=this.width,this.group0.touchEnabled=!1,this.group0.touchEnabled=!1,this.addChild(this.group0),this.group0.horizontalCenter=0,this.addChild(this.group1),this.group1.horizontalCenter=0,this.group1.addChild(this.group2),this.addChild(this.group3),this.group1.addChild(this.group3),this.imgLogo=this.createEuiImage(this.group0,"",50,200),this.selectServer=this.createEuiLabelText(this.group2,"服务器:",10,10,20),this.selectRes=this.createEuiLabelText(this.group2,"资源:",10,37,20),this.selectClient=this.createEuiLabelText(this.group2,"客户端",10,63,20);var t=new egret.Sprite;t.graphics.beginFill(47103,.5),t.graphics.drawRect(0,0,200,50),t.graphics.endFill(),t.x=140,t.y=0,this.group3.addChild(t);var e=new egret.Sprite;e.graphics.beginFill(47103,1),e.graphics.drawRect(0,0,100,40),e.graphics.endFill(),e.x=185,e.y=70,this.group3.addChild(e),this.input=this.createEuiTextInput(this.group3,150,10,241,43);var r=this.createEuiLabelText(this.group3,"游戏账号：",0,10,30);r.textFlow=this.addColorTF("游戏账号：",16777215),this.lbIntoGame=this.createEuiLabelText(this.group3,"进入游戏",195,80,20),this.lbIntoGame.textFlow=this.addColorTF("进入游戏",16777215),this.lbSkillEditor=this.createEuiLabelText(this.group2,"技能编辑",210,228,20),this.lbSkillEditor.textFlow=this.addColorTF(this.addUnderLine("技能编辑"),5949490),this.lbLabelEditor=this.createEuiLabelText(this.group2,"文本编辑",340,228,20),this.lbLabelEditor.textFlow=this.addColorTF(this.addUnderLine("文本编辑"),5949490),this.lbShowFps=this.createEuiLabelText(this.group2,"显示FPS",450,228,20),this.lbShowFps.textFlow=this.addColorTF(this.addUnderLine("显示FPS"),5949490),this.lbBack=this.createEuiLabelText(this.group2,"返回",550,228,20),this.lbBack.textFlow=this.addColorTF(this.addUnderLine("返回"),5949490);var i=this.createEuiLabelText(this.group1,"健康游戏公告",350,1020,20);i.horizontalCenter=0;var n=this.createEuiLabelText(this.group1,"抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防受骗上当。\r\n适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。",50,1050,20);n.horizontalCenter=0;this.createEuiLabelText(this.group2,"服务器列表:",10,267,20),this.createEuiLabelText(this.group2,"资源列表:",210,267,20),this.createEuiLabelText(this.group2,"客户端列表",390,267,20);this.serverList=new eui.List,this.serverList.x=10,this.serverList.y=299,this.serverList.itemRenderer=LoginTextItem,this.resList=new eui.List,this.resList.x=210,this.resList.y=299,this.resList.itemRenderer=LoginTextItem,this.clientList=new eui.List,this.clientList.x=390,this.clientList.y=299,this.clientList.itemRenderer=LoginTextItem,this.group2.addChild(this.serverList),this.group2.addChild(this.resList),this.group2.addChild(this.clientList)
},e.prototype.updateStatsu=function(){var t=void 0==window.showurl||1==window.showurl;this.group2.visible=t,t?(this.group3.x=10,this.group3.y=100):(this.group3.x=120,this.group3.y=450)},e.prototype.open=function(e,r,i){var n=this;void 0===r&&(r=null),void 0===i&&(i=null),t.prototype.open.call(this),this.data=e,this.fun=r,this.funObj=i,this.initUI1(),this.addClickE(this.lbIntoGame,this.onEnterClick),this.addClickE(this.lbSkillEditor,this.onSkillEdiorClick),this.addClickE(this.lbLabelEditor,this.onLabelEdiorClick),this.addClickE(this.lbBack,this.onBackClick),this.addClickE(this.lbShowFps,this.onBackShowFPSClick),this.addItemTapE(this.serverList,this.onServerListClick),this.addItemTapE(this.resList,this.onResClick),this.addItemTapE(this.clientList,this.onClientClick),this.imgLoaderBg.addEventListener(egret.Event.COMPLETE,this.onImgBgLoad,this),this.imgLoaderTitle.addEventListener(egret.Event.COMPLETE,this.onImgTitleLoad,this),this.serverList.dataProvider=new eui.ArrayCollection(this.data.serverList),this.resList.dataProvider=new eui.ArrayCollection(this.data.resList),this.clientList.dataProvider=new eui.ArrayCollection(this.data.clientList);var o=setTimeout(function(){n.onSelectServer(),n.onSelectRes(),n.onSelectClient(),clearTimeout(o)},500),a=localStorage[location.href+"server"],s=localStorage[location.href+"res"],l=this.data.serverList[a]||this.data.serverList[0],c=this.data.resList[s]||this.data.resList[0],h=this.getCurClient();this.selectServer.text="服务器:"+l,this.selectRes.text="资源:"+c,this.selectRes.text="客户端:"+h,this.input.text=localStorage[location.href+"user"]||EntranceParam.urlParam.user,l&&this.setServer(l,a),c&&this.setRes(c,s),h&&this.setClient(h),this.updateStatsu()},e.prototype.close=function(){t.prototype.close.call(this),this.imgLoaderBg.addEventListener(egret.Event.COMPLETE,this.onImgBgLoad,this),this.imgLoaderTitle.addEventListener(egret.Event.COMPLETE,this.onImgTitleLoad,this)},e.prototype.onSelectServer=function(){for(var t=this.data.serverList[localStorage[location.href+"server"]],e=this.serverList.numElements,r=0;e>r;r++){var i=this.serverList.getElementAt(r);if(i&&i.data==t){i.isSelect(!0);break}}},e.prototype.onSelectRes=function(){for(var t=this.data.resList[localStorage[location.href+"res"]],e=this.resList.numElements,r=0;e>r;r++){var i=this.resList.getElementAt(r);if(i&&i.data==t){i.isSelect(!0);break}}},e.prototype.onSelectClient=function(){for(var t=this.getCurClient(),e=this.clientList.numElements,r=0;e>r;r++){var i=this.clientList.getElementAt(r);if(i&&i.data==t){i.isSelect(!0);break}}},e.prototype.onServerListClick=function(t){var e=t.itemRenderer,r=t.item;this.setServer(r,t.itemIndex);for(var i=this.serverList.numElements,n=0;i>n;n++){var o=this.serverList.getElementAt(n);o&&o.isSelect(!1)}e.isSelect(!0)},e.prototype.setServer=function(t,e){var r=t.split("|"),i=r[1],n=r[2].split(":")[0],o=r[2].split(":")[1];EntranceParam.setKeyValue("srvid",i),EntranceParam.setKeyValue("srvaddr",n),EntranceParam.setKeyValue("srvport",o),this.selectServer.text="服务器:"+t,localStorage[location.href+"server"]=e},e.prototype.onResClick=function(t){var e=t.itemRenderer,r=t.item;this.setRes(r,t.itemIndex);for(var i=this.resList.numElements,n=0;i>n;n++){var o=this.resList.getElementAt(n);o&&o.isSelect(!1)}e.isSelect(!0)},e.prototype.setRes=function(t,e){var r=t.split("|"),i=r[1];EntranceParam.setKeyValue("hosts",i),this.selectRes.text="资源:"+t,localStorage[location.href+"res"]=e,this.imgLoaderBg.load(EntranceParam.urlParam.entryHosts+"icon/loginbg_nw.jpg"),this.imgLoaderTitle.load(EntranceParam.urlParam.entryHosts+"icon/logo.png")},e.prototype.onImgBgLoad=function(t){var e=t.currentTarget.data,r=new egret.Texture;r.bitmapData=e,this.imgBg.source=r},e.prototype.onImgTitleLoad=function(t){var e=t.currentTarget.data,r=new egret.Texture;r.bitmapData=e,this.imgLogo.source=r},e.prototype.onClientClick=function(t){var e=t.itemRenderer,r=t.item;this.setClient(r);for(var i=this.clientList.numElements,n=0;i>n;n++){var o=this.clientList.getElementAt(n);o&&o.isSelect(!1)}e.isSelect(!0);var a=r.split("|"),s=a[1];location.href=s},e.prototype.setClient=function(t){var e=t.split("|");e[1];this.selectClient.text="客户端:"+t},e.prototype.onEnterClick=function(t){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(r){switch(r.label){case 0:return t=this.input.text,EntranceParam.setKeyValue("user",t),localStorage[location.href+"user"]=t,window.v?[4,window.platform.getHttp(window.platform.getVerDataUrl())]:[3,2];case 1:e=r.sent(),EntranceParam.setKeyValue("v",window.v),EntranceParam.verData=JSON.parse(e),r.label=2;case 2:return this.fun.call(this.funObj),this.close(),[2]}})})},e.prototype.onSkillEdiorClick=function(t){this.close(),window.Server&&window.Server.loginSkillEditor&&window.Server.loginSkillEditor()},e.prototype.onLabelEdiorClick=function(t){this.close(),window.Server&&window.Server.loginSkillEditor&&window.Server.loginSkillEditor()},e.prototype.onBackClick=function(t){window.history.back()},e.prototype.onBackShowFPSClick=function(t){this.onDisplayFPS()},e.prototype.onDisplayFPS=function(){this.isShowFPS=!this.isShowFPS;var t=document.querySelectorAll(".egret-player"),e=t[0],r=e["egret-player"].player,i={bgAlpha:"0.3",display:"none",size:22,textColor:"0xffffff",x:0,y:0};r.displayFPS(this.isShowFPS,!1,!1,i),document.body.childNodes[5].style.visibility=this.isShowFPS?"visible":"hidden",this.lbShowFps.textFlow=this.addColorTF(this.addUnderLine(this.isShowFPS?"隐藏FPS":"显示FPS"),5949490)},e.prototype.getCurClient=function(){for(var t=0;t<this.data.clientList.length;t++){var e=this.data.clientList[t];if(e.indexOf(location.href)>-1)return e}return"自己"},e.openCheck=function(){return!0},e}(BaseWinEntry);__reflect(LoginDebugWin.prototype,"LoginDebugWin");var LoginServerData=function(){function t(){this.serverList=[],this.resList=[],this.clientList=[]}return t.prototype.setData=function(t){this.serverList=t.serverList,this.resList=t.resList,this.clientList=t.clientList},Object.defineProperty(t.prototype,"srvid",{get:function(){return this.serverStr.split("|")[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"srvaddr",{get:function(){return this.serverStr.split("|")[2].split(":")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"srvport",{get:function(){return this.serverStr.split("|")[2].split(":")[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverStr",{get:function(){return this.serverList[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hosts",{get:function(){return this.resList[0].split("|")[1]},enumerable:!0,configurable:!0}),t}();__reflect(LoginServerData.prototype,"LoginServerData"),window.LoginServerData=LoginServerData;var LoginTextItem=function(t){function e(){var e=t.call(this)||this;return e.label=new eui.Label,e.label.size=20,e.label.width=148,e.label.height=20,e.label.fontFamily="黑体",e.width=25,e.height=30,e.addChild(e.label),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.label.text=t},e.prototype.isSelect=function(t){this.label.textColor=t?5949490:16777215},e}(eui.ItemRenderer);__reflect(LoginTextItem.prototype,"LoginTextItem"),window.LoginTextItem=LoginTextItem;var LoginWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this)},e.prototype.open=function(){this.addClickE(this.btnOk,this.onClick),this.input.text=localStorage[location.href+"user"]||EntranceParam.urlParam.user},e.prototype.onClick=function(t){switch(t.currentTarget){case this.btnOk:var e=this.input.text;localStorage[location.href+"user"]=e,EntranceParam.setKeyValue("user",e),window.GameMain.login(),this.close()}},e}(BaseWinEntry);__reflect(LoginWin.prototype,"LoginWin"),window.LoginWin=LoginWin;var PfId=function(){function t(){}return t.zy="zy",t.mk="mk",t.sdw="sdw",t.mkhf="mkhf",t.afhf="afhf",t.wxxyx="wxxyx",t.ddt="ddt",t.twios="twios",t.twaz="twaz",t.twweb="twweb",t.twf1="twf1",t}();__reflect(PfId.prototype,"PfId"),window.PfId=PfId;var QdId=function(){function t(){}return t.xianlai="20061",t.qd20072="20072",t}();__reflect(QdId.prototype,"QdId"),window.QdId=QdId;var LoadGroupType=function(){function t(){}return t.preloadAll="preloadAll",t.preloadConfig="preloadConfig",t.preloadAllWXXYX="preloadAllWXXYX",t}();__reflect(LoadGroupType.prototype,"LoadGroupType"),window.LoadGroupType=LoadGroupType;var SceneType=function(){function t(){}return t.vx_type_1037="1037",t}();__reflect(SceneType.prototype,"SceneType"),window.SceneType=SceneType;var HttpRequester=function(){function t(){this.requester=new egret.HttpRequest,this.isComplete=!1,this.errorCount=0,this.maxErrorCount=3}return t.prototype.setMaxErrorCount=function(t){this.maxErrorCount=t},t.prototype.sendUrl=function(){this.requester.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),this.requester.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),this.requester.send()},t.prototype.open=function(t,e,r,i){void 0===e&&(e=egret.HttpMethod.GET),void 0===r&&(r=null),void 0===i&&(i=null),this.url=t,this.method=e,this.onSuccessCallback=r,this.onFailCallback=i||this.log.bind(this),this.requester.open(this.url,this.method)},t.prototype.send=function(){this.sendUrl()},t.prototype.onGetComplete=function(t){this.errorCount=0,this.clear(),this.onSuccessCallback&&this.onSuccessCallback(t)},t.prototype.onGetIOError=function(t){this.clear(),this.errorCount<this.maxErrorCount?(this.requester.open(this.url,this.method),this.send(),this.errorCount+=1):(this.errorCount=0,this.onFailCallback(t),this.log())},t.prototype.clear=function(){this.requester.removeEventListener(egret.Event.COMPLETE,this.onGetComplete,this),this.requester.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this)},t.prototype.log=function(){console.log("url:"+this.url+"请求失败")},t}();__reflect(HttpRequester.prototype,"HttpRequester");var RequestParam=function(){function t(){this.data={}}return t.prototype.toString=function(){var t="";for(var e in this.data)t+=""==t?e+"="+this.data[e]:"&"+e+"="+this.data[e];return t},t}();__reflect(RequestParam.prototype,"RequestParam");var Http=function(){function t(){}return t.get=function(t){return this.request(t)},t.post=function(t){return this.request(t,egret.HttpMethod.POST)},t.request=function(t,e,r){var i=this;return void 0===e&&(e=egret.HttpMethod.GET),void 0===r&&(r=egret.HttpResponseType.TEXT),new Promise(function(n,o){var a=new egret.HttpRequest;a.responseType=r,a.open(t,e),a.once(egret.Event.COMPLETE,function(t){n(a.response)},i),a.once(egret.IOErrorEvent.IO_ERROR,function(t){n(null)},i),a.send()})},t}();__reflect(Http.prototype,"Http"),window.HttpRequester=HttpRequester;var QuickSDK=function(){function t(){}return t.init=function(t,e,r,i){void 0===r&&(r=!0)},t.login=function(t){},t.setSwitchAccountNotification=function(t){},t.pay=function(t,e){},t.uploadGameRoleInfo=function(t,e){},t.logout=function(t){},t}();__reflect(QuickSDK.prototype,"QuickSDK");var QuickSDKLoginParam=function(){function t(){}return t}();__reflect(QuickSDKLoginParam.prototype,"QuickSDKLoginParam");var QuickSDKLoginParamData=function(t){function e(){var e=t.call(this)||this;return e.keys=["uid","isLogin","token","channelId"],e}return __extends(e,t),e.prototype.setData=function(t){this.uid=t.uid,this.username=t.username,this.token=t.token,this.isLogin=t.isLogin,this.channelId=t.channelId},e}(PlatFormParam);__reflect(QuickSDKLoginParamData.prototype,"QuickSDKLoginParamData");var QuickSDKRechargeParam=function(){function t(){}return t}();__reflect(QuickSDKRechargeParam.prototype,"QuickSDKRechargeParam");var QuickSDKRoleParam=function(){function t(){}return t}();__reflect(QuickSDKRoleParam.prototype,"QuickSDKRoleParam");var PlatFormMingqi=function(t){function e(){var e=t.call(this)||this;return e.domain="https://loginpayzy.h5eco.com/",e.productCode="26046731165410220043890057444376",e.productKey="08076487",e.pfParam=new QuickSDKLoginParamData,e}return __extends(e,t),e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,r=this;return __generator(this,function(i){return t.prototype.init.call(this),e=this,window.loadSingleScript("https://staticjs.quickapi.net/static/lib/libQuickSDK_v2.js",function(){QuickSDK.init(e.productCode,e.productKey,!0,r.initCallback.bind(r))}),QuickSDK.setSwitchAccountNotification(function(t){location.reload()}),[2]})})},e.prototype.initCallback=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return console.log("init success"),QuickSDK.login(this.loginCallback.bind(this)),[2]})})},e.prototype.loginCallback=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t.status?(console.log("GameDemo:QuickSDK登录成功: uid=>"+t.data.uid),this.pfParam.setData(t.data),this.openSelectServer()):console.log("GameDemo:QuickSDK登录失败:"+t.message),[2]})})},e.prototype.createRole=function(t){var e=this.getQuickSDKRoleParam(t);e.isCreateRole=!0,QuickSDK.uploadGameRoleInfo(JSON.stringify(e),function(t){})},e.prototype.roleUp=function(t){if(t.actorLevel%100==0){var e=this.getQuickSDKRoleParam(t);e.isCreateRole=!1,QuickSDK.uploadGameRoleInfo(JSON.stringify(e),function(t){})}},e.prototype.getQuickSDKRoleParam=function(t){var e={};return e.isCreateRole=!0,e.roleCreateTime=t.creatRoleTime,e.uid=this.pfParam.uid,e.serverId=EntranceParam.urlParam.srvid,e.userRoleName=t.actorName,e.userRoleId=t.actorId,e.userRoleBalance=t.yb,e.vipLevel=t.vipLevel+t.svipLevel,e.userRoleLevel=t.actorLevel,e},e.prototype.showRecharge=function(t,e){return __awaiter(this,void 0,void 0,function(){var r,i;return __generator(this,function(n){switch(n.label){case 0:return[4,this.checkShowRecharge()];case 1:return r=n.sent(),r&&(t?(i={},i.productCode=this.productCode,i.uid=this.pfParam.uid,i.userRoleId=e.actorId,i.userRoleName=e.actorName,i.serverId=EntranceParam.urlParam.srvid,i.userServer=e.serverTime,i.userLevel=e.actorLevel,i.subject=t.itemName,i.desc=t.desc,i.callbackUrl="",i.extrasParams="",i.goodsId="goods",i.count=1,i.quantifier="",QuickSDK.pay(JSON.stringify(i),function(){console.log("购买道具成功")})):alert("错误的购买道具")),[2]}})})},e.prototype.logout=function(t){QuickSDK.logout(function(t){location.reload()})},e}(PlatFormWW);__reflect(PlatFormMingqi.prototype,"PlatFormMingqi");var PlatFormNW=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},e.prototype.openBgWin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.openSelectServer(),[2]})})},e.prototype.openSelectServer=function(){return __awaiter(this,void 0,void 0,function(){var t,e,r,i;return __generator(this,function(n){switch(n.label){case 0:return t=""+EntranceParam.urlParam.entryHosts+window.loginJson,i=(r=JSON).parse,[4,this.getHttp(t)];case 1:return e=i.apply(r,[n.sent()]),this.loginDebugWin=new LoginDebugWin,this.main.addChild(this.loginDebugWin),this.loginDebugWin.open(e,window.GameMain.login,window.GameMain),[2]}})})},e.prototype.closeSelectServer=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.loginDebugWin&&(this.loginDebugWin.close(),this.loginDebugWin=null),[2]})})},e.prototype.showRecharge=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return window.GameMain.showRecharge(t,e),[2]})})},e.prototype.isOpenShare=function(t){t(1)},e.prototype.setShareCallback=function(t){},e.prototype.isOpenFocus=function(t){t(0)},e.prototype.getVerifyInfo=function(t,e){t(0),e(new VerifyDataPHP)},e.prototype.isCustomerBtn=function(t){t(1)},e.prototype.isShowRecharge=function(){var t=window.pfId;return t?(t=t.toString(),this.main.getPf(t).isShowRecharge()):!0},e.prototype.showShare=function(){t.prototype.showShare.call(this)},e.prototype.getSceneType=function(){return SceneType.vx_type_1037},e}(PlatFormBase);__reflect(PlatFormNW.prototype,"PlatFormNW"),window.PlatFormNW=PlatFormNW;var LangEntry=function(){function t(){}return t.str1="服务器名:",t.str2="维护中...",t.str3="健康游戏公告\n抵制不良游戏，拒绝盗版游戏，注意自我保护，谨防受骗上当。\n适度游戏益脑，沉迷游戏伤身，合理安排时间，享受健康生活。",t.str4="\n国新出审[2019]2330号\n（ISBN）:978-7-498-06711-1\n著作权人：广州千梦互娱科技有限公司\n出版单位：北京伯通电子出版社  适龄提示：18岁以上",t.str5="你的账号已经被禁止登录游戏,请联系客服",t.str6="服务器维护中,请选择其他服务器",t.str7=["只有装备寻宝才能获得神戒和魔戒","参与百倍返利，各种奖励领不停","0元购可以免费获得绝版时装~","购买钻石月卡，每天都可以领取大量钻石","1元秒杀，小投资大回报，打包购买还能再打折哦","获得无限圣杯就能体验无限暴击的快感啦！","血色恶魔副本记得鼓舞，不然就亏大了"],t.str8="最近登录",t.str9="服",t.str10="暂无公告!",t.str11="您选择的服务器与原服务器版本不同,请重新进入app",t.str12="充值已关闭!",t.str13="服务器已满,请选择其他服务器!",t.str14="确定",t}();__reflect(LangEntry.prototype,"LangEntry");var Main=function(t){function e(){var r=t.call(this)||this;e.self=r;var i=egret.MainContext.instance.stage;return i.registerImplementation("eui.IAssetAdapter",new AssetAdapter),i.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),egret.Capabilities.isMobile||(i.orientation=egret.OrientationMode.AUTO),RES.setMaxLoadingThread(6),egret.ImageLoader.crossOrigin="anonymous",r.start(),r}return __extends(e,t),e.prototype.start=function(){window.hosts&&EntranceParam.setKeyValue("hosts",window.hosts);var t;t=window.entryHosts?window.entryHosts:EntranceParam.urlParam.hosts.replace("resource","entrance"),EntranceParam.setKeyValue("entryHosts",t),window.loginJson=void 0!=window.loginJson?window.loginJson:"login.json";var e=window.qdId&&window.qdId.toString();e&&EntranceParam.setKeyValue("appid",e);var r,i=window.pfId&&window.pfId.toString();r=window.platform=this.getLoginPf(i),r.start(this)},e.prototype.getLoginPf=function(t){console.log("pfId:"+t);var e,r=window.password||egret.getOption("password");return r?("123456"==r?e=new PlatFormQuickHT:"111222"==r?e=new PlatFormQuickNW:"111111"==r&&(e=new PlatFormNW,EntranceParam.setKeyValue("pf",t)),e.pfId=t):e=this.getPf(t),e},e.prototype.getPf=function(t){console.log("pfId:"+t);var e;switch(t){case PfId.zy:case PfId.mk:case PfId.mkhf:case PfId.sdw:case PfId.afhf:e=new PlatFormZSMK2;break;case PfId.ddt:e=new PlatFormZSMK2DDT;break;case PfId.wxxyx:e=new PlatFormWXXYX;break;case PfId.twios:e=new PlatFormTWIOS;break;case PfId.twaz:e=new PlatFormTWAndroid;break;case PfId.twweb:e=new PlatFormTWWeb;break;case PfId.twf1:e=new PlatFormTWF1;break;default:e=new PlatFormNW}return e.pfId=t,e},e}(eui.UILayer);__reflect(Main.prototype,"Main"),window.Main=Main;var PlatFormQuickHT=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setV=function(t){EntranceParam.setKeyValue("v",t)},e.prototype.setVerData=function(){return __awaiter(this,void 0,void 0,function(){var t,e,r;return __generator(this,function(i){switch(i.label){case 0:return t=EntranceParam,r=(e=JSON).parse,[4,this.getHttp(this.getVerDataUrl())];case 1:return t.verData=r.apply(e,[i.sent()]),[2]}})})},e}(PlatFormQuickBase);__reflect(PlatFormQuickHT.prototype,"PlatFormQuickHT"),window.PlatFormQuickHT=PlatFormQuickHT;var PlatFormQuickNW=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setV=function(t){EntranceParam.setKeyValue("v","")},e}(PlatFormQuickBase);__reflect(PlatFormQuickNW.prototype,"PlatFormQuickNW"),window.PlatFormQuickNW=PlatFormQuickNW;var EntranceParam=function(){function t(){}return t.setKeyValue=function(t,e){void 0!==e&&(this.urlParam[t]=e)},Object.defineProperty(t,"isNew",{get:function(){return"1"==this.urlParam.isnew},enumerable:!0,configurable:!0}),t.has=function(t){return this.verData&&this.verData.hasOwnProperty(t)},t.getDir=function(t){return 255&this.verData[t]},t.getVer=function(t){return this.verData[t]},t.hasVer=function(){return void 0!==t.urlParam.v&&""!==t.urlParam.v},t.urlParamDefault={server_list_url:"",notice_url:"",server_status:"1",isBan:"0",srvid:"1",serverid:"1",srvport:"9401",user:"client9999",srvaddr:"192.168.1.250",spverify:"qianmeng",pfid:"151",pf:"",appid:"151",openId:"151",openKey:"151",isnew:"0",roleCount:"1",nickName:"",serverName:"1服",loadurl:"",login_ip:"192.168.0.1",v:"",entryHosts:"",hosts:"http://192.168.1.252:8081/trunk2/client/resource/",configUrl:"http://192.168.1.252:8081//config1.json"},t.urlParam=t.urlParamDefault,t}();__reflect(EntranceParam.prototype,"EntranceParam"),window.EntranceParam=EntranceParam;var PlatFormTWAndroid=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t.prototype.init.call(this),this.pfParam.appid="1",this.sdkLogin(),[2]})})},e.prototype.sdkLogin=function(){document.location.href="gdsdk://gamedreamerLogin"},e.prototype.loginGame=function(){document.location.href="gdsdk://gamedreamerCheckServer?serverCode="+EntranceParam.urlParam.srvid,window.GameMain.isLogoutCallback(!0),t.prototype.loginGame.call(this)},e.prototype.createRole=function(t){document.location.href="gdsdk://gamedreamerNewRoleName?roleId="+t.actorId+"&roleName="+t.actorName},e.prototype.selectRole=function(t){document.location.href="gdsdk://gamedreamerSaveRoleName?roleId="+t.actorId+"&roleName="+t.actorName+"&level="+t.actorLevel},e.prototype.enterGame=function(t){document.location.href="gdsdk://gamedreamerNewRoleName?roleId="+t.actorId+"&roleName="+t.actorName,document.location.href="gdsdk://gamedreamerStartGameForEventRecorded"},e.prototype.showRecharge=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return document.location.href="gdsdk://gamedreamerSinglePay?proItemid=I"+t.pxId,[2]})})},e.prototype.sendService=function(t){document.location.href="gdsdk://gamedreamerCs?serverCode="+EntranceParam.urlParam.srvid},e.prototype.logout=function(){document.location.href="gdsdk://gamedreamerMemberCenter"},e}(PlatFormTWBase);__reflect(PlatFormTWAndroid.prototype,"PlatFormTWAndroid");var UserInfoAZ=function(){function t(){}return t}();__reflect(UserInfoAZ.prototype,"UserInfoAZ"),window.PlatFormTWAndroid=PlatFormTWAndroid;var PlatFormTWF1=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.domain="https://gugz-login.freetop1.com/",e}return __extends(e,t),e.prototype.test=function(e){void 0===e&&(e="client1"),t.prototype.test.call(this,e)},e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t.prototype.init.call(this),this.pfParam.openId=egret.getOption("user_id"),this.pfParam.appid="3",[2]})})},e.prototype.openBgWin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,t.prototype.openBgWin.call(this)];case 1:return e.sent(),this.openSelectServer(),[2]}})})},e.prototype.firstEnterGame=function(e){t.prototype.firstEnterGame.call(this,e),window.gtag&&window.gtag("event","conversion",{send_to:"AW-758741146/VfAmCKKvl6cBEJrx5ekC"}),window.fbq&&window.fbq("track","CompleteRegistration")},e.prototype.showRecharge=function(t,e){return __awaiter(this,void 0,void 0,function(){var r,i,n;return __generator(this,function(o){return r=this.getSignAndTs("2c3PqEDFAxL2"),i=r[0],n=r[1],window.open("https://www.freetop1.com/pay.php?game_id="+egret.getOption("game_id")+("&server_id="+EntranceParam.urlParam.srvid)+("&user_id="+egret.getOption("user_id"))+("&role_id="+e.actorId)+("&item_id=A"+t.pxId)+("&pay_money="+t.amount)+("&ts="+n)+("&sign="+i)),[2]})})},e.prototype.createRole=function(t){var e=t.actorId,r=t.actorName,i=this.getSignAndTs("aaZCIRWs6HEb"),n=i[0],o=i[1],a=new Date,s=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds();Http.get("https://www.freetop1.com/api/gameRole.php?game_id="+egret.getOption("game_id")+("&server_id="+EntranceParam.urlParam.srvid)+("&user_id="+egret.getOption("user_id"))+("&role_id="+e)+("&role_name="+r)+("&create_date="+s)+("&ts="+o)+("&sign="+n))},e.prototype.getSignAndTs=function(t){var e=egret.getOption("user_id"),r=(new Date).getTime(),i=md5.hex_md5(""+t+e+r);return[i,r]},e}(PlatFormTWBase);__reflect(PlatFormTWF1.prototype,"PlatFormTWF1");var PlatFormTWIOS=function(t){function e(){var e=t.call(this)||this;return e._isLiuhai=!1,e}return __extends(e,t),e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(r){return t.prototype.init.call(this),this.pfParam.appid="2",egret.ExternalInterface.addCallback("loginCallback",function(t){var r=JSON.parse(t);console.log("loginCallback----------------------------"+r),e.pfParam.openId=r.userid,e.openSelectServer()}),egret.ExternalInterface.addCallback("enterServerCallback",function(t){console.log("enterServerCallback----------------------------"+t)}),egret.ExternalInterface.addCallback("payCallback",function(t){"1"==t&&window.GameMain.payCallback(!0,0),console.log("payCallback----------------------------"+t)}),egret.ExternalInterface.addCallback("logoutCallback",function(t){console.log("logoutCallback----------------------------"+t),window.GameMain.logout()}),egret.ExternalInterface.addCallback("isLiuHaiCallback",function(t){console.log("isLiuHaiCallback----------------------------"+t),"true"==t&&(e._isLiuhai=!0)}),[2]})})},e.prototype.loginGame=function(){egret.ExternalInterface.call("isLiuHai",""),egret.ExternalInterface.call("enterServer",EntranceParam.urlParam.srvid),window.GameMain.isLogoutCallback(!0),t.prototype.loginGame.call(this)},e.prototype.createRole=function(t){var e={};e.name=t.actorName,e.id=t.actorId.toString();var r=JSON.stringify(e);egret.ExternalInterface.call("createRole",r)},e.prototype.enterGame=function(t){var e={};e.name=t.actorName,e.id=t.actorId.toString(),e.lv=t.actorLevel.toString();var r=JSON.stringify(e);egret.ExternalInterface.call("enterRole",r),egret.ExternalInterface.call("startGame","")},e.prototype.logout=function(){egret.ExternalInterface.call("userCenter","")},e.prototype.showRecharge=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return egret.ExternalInterface.call("pay","A"+t.pxId),[2]})})},e.prototype.sendService=function(t){},e.prototype.isLiuhai=function(){return this._isLiuhai},e}(PlatFormTWBase);__reflect(PlatFormTWIOS.prototype,"PlatFormTWIOS");var PlatFormTWWeb=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(r){return t.prototype.init.call(this),this.pfParam.appid="3",window.loadSingleScript("https://twapi.gamedreamer.com/js/Partner/common.js",function(){window.GDPartner.login(e.gamecode,function(t){"success"===t.code?(console.log("登入成功， 用戶ID "+t.data.id+", 用戶名 "+t.data.name),e.pfParam.openId=t.data.id,e.openSelectServer()):console.log("登入失敗, 失敗原因： "+t.message)})}),[2]})})},e.prototype.checkStartGame=function(){return""!==this.pfParam.openId?!0:(alert("请先登入"),!1)},e.prototype.showRecharge=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return window.GDPartner.openTopupPage(this.gamecode),[2]})})},e.prototype.sendService=function(t){window.GDPartner.showCS(this.gamecode,EntranceParam.urlParam.srvid,t.actorId,t.actorName)},e.prototype.logout=function(){window.GDPartner.logout(this.gamecode,function(){console.log("logout成功")})},e}(PlatFormTWBase);__reflect(PlatFormTWWeb.prototype,"PlatFormTWWeb");var ResEntrance=function(){function t(){}return t.getResSource=function(t){var e=EntranceParam.urlParam.entryHosts+"icon/"+t;return this.resDic[e]=1,e},t.destroyRes=function(){for(var t in this.resDic){RES.destroyRes(t);delete this.resDic}},t.resDic={},t}();__reflect(ResEntrance.prototype,"ResEntrance"),window.ResEntrance=ResEntrance;var WXRequestParam=function(){function t(){this.method="GET",this.dataType="json",this.responseType="text",this.fail=function(){console.log("http请求失败")}}return t}();__reflect(WXRequestParam.prototype,"WXRequestParam");var WXSuccessData=function(){function t(){}return t}();__reflect(WXSuccessData.prototype,"WXSuccessData");var SubPacketParam=function(){function t(){}return t}();__reflect(SubPacketParam.prototype,"SubPacketParam");var ShareInfoMK2XYX=function(){function t(){}return t}();__reflect(ShareInfoMK2XYX.prototype,"ShareInfoMK2XYX");var PlatFormWXXYX=function(t){function e(){var e=t.call(this)||this;return e.v="0",e.scene=0,e.query="",e.configJson={},e}return __extends(e,t),e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,e,r,i,n,o,a,s;return __generator(this,function(l){switch(l.label){case 0:return this.initWin(),t=this,[4,this.getHttp(this.getVerUrl())];case 1:return e=l.sent(),r=JSON.parse(e),this.v=r.client_version,i=t.getH5gamecn(),n=this.pfParam,o=Math.floor(2*Math.random())+1,a={title:this.getTitle(),imgUrl:this.getImgUrl(),query:""},s=window.wx.getLaunchOptionsSync(),this.scene=s.scene,this.query=s.query,i._init({getLoginParamsCallBack:function(e){n.setData(e),t.openSelectServer()},shareInfo:a}),[2]}})})},e.prototype.getVerUrl=function(){return""+this.domain+this.pfId+"/api/clientVersion"},e.prototype.getTabListUrl=function(){var e;return e=void 0==window.v||window.v>this.v?""+this.domain+this.pfId+"/login/wxserverlabel?"+this.pfParam.toParamString()+"}":t.prototype.getTabListUrl.call(this)},e.prototype.getServerListUrl=function(e){var r;return r=void 0==window.v||window.v>this.v?""+this.domain+this.pfId+"/login/wxgetserverlist?"+this.pfParam.toParamString()+"&"+e.toParamString()+"}":t.prototype.getServerListUrl.call(this,e)},e.prototype.getHttp=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,r){window.wx.request({url:t,success:function(t){e(t.data)},fail:function(){e(null)},dataType:"text"})})]})})},e.prototype.getH5gamecn=function(){return window.h5gamecn||(window.h5gamecn=new DebugH5GAMECNMK2),window.h5gamecn},e.prototype.showRecharge=function(e,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return t.prototype.showRecharge.call(this,e,r),[2]})})},e.prototype.isOpenFocus=function(t){t(0)},e.prototype.loginGame=function(){window.isTest?t.prototype.loginGame.call(this):this.isIos()?(this.main.addChild(this.serverTipsWin),this.serverTipsWin.open("ios用户暂未开放服务!")):t.prototype.loginGame.call(this)},e.prototype.getConfig=function(){var t=this.configJson;return this.configJson={},t},e.prototype.loadGroup=function(t){var e;e=t.type==LoadGroupType.preloadAll?LoadGroupType.preloadAllWXXYX:t.type,this.param=t,ResUtil.ins().loadGroup(e,this.onSuccess.bind(this),t.onProgress,null,t.retryCount)},e.prototype.onSuccess=function(){var t=this,e=this.getVirtualUrl("resource/cfg/cfg.zip");return window.loadCfgzip?window.loadCfgzip(e,function(e){t.configJson=e,t.param.onSuccess(),t.param=null}):void 0},e.prototype.loadTheme=function(e,r){if(egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME){var i=new eui.Theme(e,this.main.stage);i.addEventListener(eui.UIEvent.COMPLETE,function(){r()},this)}else t.prototype.loadTheme.call(this,e,r)},e.prototype.isShowRecharge=function(){return!this.isIos()},e.prototype.relogin=function(){window.GameMain.relogin()},e.prototype.isIos=function(){var t=window.wx.getSystemInfoSync(),e=t.system.indexOf("iOS")>=0;return e},e.prototype.getSceneType=function(){return this.scene},e.prototype.requestInviteInfo=function(){var t=""+this.domain+this.pfId+"/api?m=player&fn=getInviteInfo&openId="+EntranceParam.urlParam.openId+"&server_id="+EntranceParam.urlParam.srvid+"&"+this.query;this.getHttp(t)},e.prototype.showShare=function(){var t={title:this.getTitle(),imgUrl:this.getImgUrl(),query:this.getQuery()};
this.getH5gamecn().showShare(t)},e.prototype.getTitle=function(){return"勇者大陆，等你一起征战！"},e.prototype.getImgUrl=function(){var t=Math.floor(2*Math.random())+1;return ResEntrance.getResSource("shareicon"+t+".jpg")},e.prototype.getQuery=function(){return"invite_server_id="+EntranceParam.urlParam.srvid+"&invite_account="+EntranceParam.urlParam.openId},e}(PlatFormZSMK2);__reflect(PlatFormWXXYX.prototype,"PlatFormWXXYX"),window.PlatFormXYX=PlatFormWXXYX;var DebugTXSDK=function(){function t(){this.isDebug=!0,this.agent="zycs2"}return t.prototype.request=function(t){var e=new HttpRequester,r=t.url.replace("https","http");e.open(r,t.method,function(e){var r=new WXSuccessData;r.data=JSON.parse(e.currentTarget.response),t.success(r)}),e.send()},t.prototype.downloadFile=function(t){},t.prototype.getSystemInfoSync=function(){var t,e,r=navigator.userAgent;return r.match(/iPad/)||r.match(/iPhone/)||r.match(/iPod/)?(t="iOS",e="iOS"):(t="system",e="model"),{system:t,model:e}},t.prototype.getLaunchOptionsSync=function(){var t=1037,e="invite_server_id="+EntranceParam.urlParam.srvid+"&invite_account="+EntranceParam.urlParam.openId;return{scene:t,query:e}},t}();__reflect(DebugTXSDK.prototype,"DebugTXSDK",["TXSDK"]),window.wx||(window.wx=new DebugTXSDK);var DebugH5GAMECNMK2=function(){function t(){}return t.prototype.showVerify=function(t){},t.prototype.getVerifyInfo=function(t){},t.prototype.isCustomerBtn=function(t){},t.prototype.showShare=function(t){},t.prototype.isOpenShare=function(t){},t.prototype.setShareCallback=function(t){},t.prototype.showQrCode=function(){},t.prototype.getFocusState=function(t,e){},t.prototype._init=function(t){var e=t,r=new ZSMK2LoginParams;window.openId&&(r.openId=window.openId),window.qdId&&(r.passId=window.qdId.toString()),e.getLoginParamsCallBack(r)},t.prototype.enterGame=function(t){},t.prototype.onloginerror=function(){},t.prototype.logout=function(){},t.prototype.pay=function(t,e){},t.prototype.reportData=function(t){},t.prototype.checkChat=function(t,e){e({result:"success",code:1,content:t.chat_content,failMsg:""})},t}();__reflect(DebugH5GAMECNMK2.prototype,"DebugH5GAMECNMK2",["H5GAMECNMK2"]),window.alert||(window.alert=function(t){console.log(t)});var ZSRechargeParams=function(){function t(){}return t}();__reflect(ZSRechargeParams.prototype,"ZSRechargeParams");var ZSReportParam=function(){function t(){}return t}();__reflect(ZSReportParam.prototype,"ZSReportParam");var ZSLoginData=function(){function t(){}return t}();__reflect(ZSLoginData.prototype,"ZSLoginData");var ShareInfo=function(){function t(){}return t}();__reflect(ShareInfo.prototype,"ShareInfo");var ZSLoginParams=function(t){function e(){var e=t.call(this)||this;return e.agent="zy",e.keys=["openId"],e}return __extends(e,t),e}(PlatFormParam);__reflect(ZSLoginParams.prototype,"ZSLoginParams");var PlatFormZS=function(t){function e(){var e=t.call(this)||this;return e.domain="https://loginpayzy.h5eco.com/",e.pfParam=new ZSLoginParams,e}return __extends(e,t),e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(r){return t.prototype.init.call(this),this.pfParam.setValueByUrl(location.href),window.loadSingleScript("https://pc.h5eco.com/pass_a/jssdk/h5sdk.js",function(){}),e=this,window.__sdkready=function(){var t=this.pfParam,r=new ShareInfo;r={title:"卓越传说",imgUrl:"",desc:"",openId:t.openId,status:EntranceParam.urlParam.srvid};var i=e.getH5gamecn();i._init({getServerCallBack:function(t,e,r,i){0==t?console.log("loginCallBack选区"):1==t?console.log("loginCallBack直接进入游戏"):2==t&&console.log("loginCallBack维护")},enterCallBack:function(t,e){1==t?console.log("enterCallBack 直接进入游戏"):2==t&&console.log("enterCallBack 维护")},shareInfo:r,popWindow:function(t){console.log("弹出提示："+t.msg)},shareIconCallBack:function(t){console.log("shareIconCallBack",t),t.backicon},version:10}),e.openSelectServer()}.bind(this),[2]})})},e.prototype.showRecharge=function(t,e){return __awaiter(this,void 0,void 0,function(){var r,i,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.checkShowRecharge()];case 1:return r=o.sent(),r&&(t?(i=e.actorId+"_"+new Date(e.serverTime).valueOf(),n=new ZSRechargeParams,n.orderNo=i,n.ext=EntranceParam.urlParam.srvid,n.appId=this.pfParam.appId,n.openId=EntranceParam.urlParam.openId,n.openKey=EntranceParam.urlParam.openKey,n.appUserName=e.actorName,n.subject=t.itemName,n.level=e.actorLevel,n.roleId=e.actorId,n.serverName=EntranceParam.urlParam.serverName,this.getH5gamecn().pay(t.amount,n)):alert("错误的购买道具")),[2]}})})},e.prototype.createRole=function(t){this.reportSDK("","create_role",t.actorLevel,t.actorId,t.actorName)},e.prototype.enterGame=function(t){this.reportSDK("","login",t.actorLevel,t.actorId,t.actorName)},e.prototype.roleUp=function(t){t.actorLevel%100==0&&this.reportSDK("","levelup",t.actorLevel,t.actorId,t.actorName)},e.prototype.sendService=function(t){var e="/"+this.pfId+"/api/?m=player&fn=sendhttp&game="+EntranceParam.urlParam.srvid+"&userId="+t.actorId+"&userName="+EntranceParam.urlParam.openId+"&userNameCn="+t.actorName+"&userLevel="+t.actorLevel+"&vipLevel="+t.vipLevel+"&content="+t.content,r=new HttpRequester,i=function(e){1===e||"1"===e?t.onSuccessCallback():t.onFailCallback()};r.open(e,egret.HttpMethod.GET,i,i),r.send()},e.prototype.showVerify=function(t){this.getH5gamecn().showVerify(t)},e.prototype.showQrCode=function(){this.getH5gamecn().showQrCode()},e.prototype.logout=function(){this.getH5gamecn().logout()},e.prototype.reportSDK=function(t,e,r,i,n){var o=new ZSReportParam;o.action=e,o.app_openid=t,o.server=EntranceParam.urlParam.srvid,o.serverName=EntranceParam.urlParam.serverName,o.openId=EntranceParam.urlParam.openId,o.roleId=i,o.nickName=n,o.openKey=EntranceParam.urlParam.openKey,o.level=r,this.getH5gamecn().reportData(o)},e.prototype.getH5gamecn=function(){return window.h5gamecn},e}(PlatFormWW);__reflect(PlatFormZS.prototype,"PlatFormZS"),window.PlatFormZS=PlatFormZS;var ResUtil=function(){function t(){this.configCaller=new CallerRes(null,null),this.isConfigLoading=!1,this.groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResError,this)}return t.ins=function(){return this._instance||(this._instance=new t)},t.prototype.loadConfig=function(t,e,r,i){this.isConfigLoading?console.log("egret配置文件加载中,不可重复加载"):(RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),this.configCaller.func=r,this.configCaller.obj=i,RES.loadConfig(t,e),this.isConfigLoading=!0)},t.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),this.configCaller.call(),this.configCaller.reset()},t.prototype.loadGroup=function(t,e,r,i,n){if(void 0===n&&(n=3),this.groups[t]){var o=this.groups[t];o.func=e,o.funcProgress=r,o.obj=i,o.maxErrCount=n}else this.groups[t]=new CallerRes(e,r,i,n);RES.loadGroup(t)},t.prototype.onResComplete=function(t){var e=t.groupName;if(this.groups[e]){var r=this.groups[e];r.call(),r.reset(),delete this.groups[e]}},t.prototype.onResProgress=function(t){var e=t.groupName;this.groups[e]&&this.groups[e].callProgress(t.itemsLoaded,t.itemsTotal,t.resItem.name)},t.prototype.onResError=function(t){var e=this.groups[t.groupName];if(e.addError(),e.isErrorMax()){for(var r=RES.getGroupByName(t.groupName),i=[],n=0,o=r;n<o.length;n++){var a=o[n];a.data||i.push(a.name)}for(var s="",l=0,c=i;l<c.length;l++){var h=c[l];s+=h+","}this.onResComplete(t)}else RES.loadGroup(t.groupName)},t}();__reflect(ResUtil.prototype,"ResUtil");var CallerRes=function(){function t(t,e,r,i){void 0===t&&(t=null),void 0===r&&(r=null),void 0===i&&(i=3),this.errCount=0,this.maxErrCount=3,this.func=t,this.obj=r,this.funcProgress=e,this.maxErrCount=i}return t.prototype.isSame=function(t,e){return this.func==t&&this.obj==e},t.prototype.call=function(){if(this.func){if(!this.obj)return this.func();this.func.call(this.obj)}},t.prototype.callProgress=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.funcProgress&&(this.obj?(r=this.funcProgress).call.apply(r,[this.obj].concat(t)):this.funcProgress.apply(this,t));var r},t.prototype.addError=function(){this.errCount++},t.prototype.isErrorMax=function(){return this.errCount>=this.maxErrCount},t.prototype.reset=function(){this.func=null,this.obj=null,this.funcProgress=null,this.errCount=0,this.maxErrCount=3},t}();__reflect(CallerRes.prototype,"CallerRes"),window.CallerRes=CallerRes;var PlatFormZSMK2DDT=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.isShowLogo=function(){return!1},e.prototype.isShowISBN=function(){return!1},e.prototype.getBgName=function(){return"bg_ddt.jpg"},e}(PlatFormZSMK2);__reflect(PlatFormZSMK2DDT.prototype,"PlatFormZSMK2DDT"),window.PlatFormZSMK2DDT=PlatFormZSMK2DDT;var ServerBgWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.imgBg=new eui.Image,this.imgBg.source=ResEntrance.getResSource(window.platform.getBgName()),this.addChild(this.imgBg)},e.prototype.open=function(){t.prototype.open.call(this),this.addBg(.8)},e.prototype.onStageResize=function(){t.prototype.onStageResize.call(this),egret.Capabilities.isMobile?this.imgBg.scaleX=this.imgBg.scaleY=egret.MainContext.instance.stage.stageWidth/900:this.imgBg.horizontalCenter=0},e}(BaseWinEntry);__reflect(ServerBgWin.prototype,"ServerBgWin"),window.ServerBgWin=ServerBgWin;var ServerGonggaoWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.group.width=497,this.group.height=786,this.group.verticalCenter=-84,this.imgBg=new eui.Image,this.imgBg.left=this.imgBg.right=this.imgBg.top=this.imgBg.bottom=0,this.imgBg.source=ResEntrance.getResSource("ntcbg.jpg"),this.group.addChild(this.imgBg),this.scroller=new eui.Scroller,this.scroller.x=30,this.scroller.y=68,this.scroller.width=434,this.scroller.height=700,this.scroller.scrollPolicyV="on";var e=new eui.Group;this.scroller.addChild(e),this.scroller.viewport=e,this.group.addChild(this.scroller),this.labelGG=new eui.Label,this.labelGG.size=22,this.labelGG.width=this.scroller.width,this.labelGG.text="",this.labelGG.fontFamily="黑体",this.labelGG.textColor=16777215,this.labelGG.lineSpacing=5,this.labelGG.wordWrap=!0,this.labelGG.multiline=!0,e.addChild(this.labelGG),this.btnClose0=new eui.Image,this.btnClose0.y=815,this.btnClose0.horizontalCenter=0,this.btnClose0.source=ResEntrance.getResSource("close.png"),this.group.addChild(this.btnClose0)},e.prototype.open=function(t){this.labelGG.textFlow=StringUtil.toTF(t),this.addBg(),this.addClickE(this.btnClose0,this.onClick),this.addClickE(this,this.onClick)},e.prototype.onClick=function(t){switch(t.target){case this.btnClose0:this.close()}if(t.currentTarget==this){var e=this.globalToLocal(t.stageX,t.stageY);this.group.hitTestPoint(e.x,e.y)||this.close()}},e}(BaseWinEntry);__reflect(ServerGonggaoWin.prototype,"ServerGonggaoWin"),window.ServerGonggaoWin=ServerGonggaoWin;var ServerListData=function(){function t(){this.defaultserver=new ServerData,this.serverTabList=[],this.isnew="0"}return t.prototype.setDataByObject=function(t){this.defaultserver.setDataByObject(t.lastserver.default_server);var e=[];for(var r in t.lastserver.last_server){var i=new ServerData;i.setDataByObject(t.lastserver.last_server[r]),e.push(i)}var n=new ServerPHPTabData;n.label_id=0,n.serverList=e,this.serverTabList.push(n);for(var r in t.label_list){var i=new ServerPHPTabData;i.setDataByObject(t.label_list[r]),this.serverTabList.push(i)}this.isnew=t.isnew},t.prototype.sortDesc=function(t,e){return t.label_id>e.label_id?-1:t.label_id<e.label_id?1:0},t.prototype.getMaxPage=function(){return this.serverTabList.length},t.prototype.getServerListByPage=function(t){return this.serverTabList[t].serverList},t.prototype.setServerListByPage=function(t,e){this.serverTabList[t].serverList=e},t.prototype.getServerTabData=function(t){return this.serverTabList[t]},t}();__reflect(ServerListData.prototype,"ServerListData"),window.ServerListData=ServerListData;var ServerPHPTabData=function(t){function e(){var e=t.call(this)||this;return e.label_id=1,e.name="",e.start=1,e.end=100,e.serverList=[],e.keys=["label_id","start","end"],e}return __extends(e,t),e.prototype.setDataByObject=function(t){this.label_id=t.label_id||1,this.start=t.start||1,this.end=t.end||100,this.name=t.name||"未知"},e.prototype.getTabName=function(){return 0==this.label_id?"最近登录":""+this.name},e.prototype.hasServerList=function(t){return this.serverList.length>0},e}(PlatFormParam);__reflect(ServerPHPTabData.prototype,"ServerPHPTabData"),window.ServerPHPTabData=ServerPHPTabData;var ServerPHPData=function(){function t(){}return t}();__reflect(ServerPHPData.prototype,"ServerPHPData"),window.ServerPHPData=ServerPHPData;var ServerData=function(){function t(){this.server_id="-1",this.name="未知",this.server_status="3"}return t.prototype.setDataByObject=function(t){this.server_id=t.server_id||"-1",this.name=t.name||"未知",this.server_status=t.server_status||"3"},Object.defineProperty(t.prototype,"isWeihu",{get:function(){return 3==parseInt(this.server_status)||0==parseInt(this.server_status)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"srvId",{get:function(){return parseInt(this.server_id)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canEnter",{get:function(){return"-1"!=this.server_id&&!this.isWeihu},enumerable:!0,configurable:!0}),t}();__reflect(ServerData.prototype,"ServerData"),window.ServerData=ServerData;var ServerTabReturnData=function(){function t(){}return t.prototype.copy=function(t){this.serverlist=[];for(var e=0;e<t.serverlist.length;e++)this.serverlist[e]=new ServerData,this.serverlist[e].setDataByObject(t.serverlist[e])},t}();__reflect(ServerTabReturnData.prototype,"ServerTabReturnData"),window.ServerTabReturnData=ServerTabReturnData;var ServerListWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.group.width=497,this.group.height=786,this.group.verticalCenter=-84,this.imgBg=new eui.Image,this.imgBg.left=this.imgBg.right=this.imgBg.top=this.imgBg.bottom=0,this.imgBg.source=ResEntrance.getResSource("selserbg.jpg"),this.group.addChild(this.imgBg),this.tab=new eui.TabBar,this.tab.x=18,this.tab.y=66;var e=this.tab.layout=new eui.VerticalLayout;e.gap=6,this.tab.itemRenderer=ServerListWinTabItem,this.group.addChild(this.tab),this.list=new eui.List,this.scroller=new eui.Scroller,this.scroller.x=198,this.scroller.y=66,this.scroller.width=282,this.scroller.height=700,this.scroller.scrollPolicyV="on",this.scroller.viewport=this.list,this.group.addChild(this.scroller);var r=this.list.layout=new eui.VerticalLayout;r.gap=6,this.list.itemRenderer=ServerListWinItem,this.list.dataProvider=this.listCollection=new eui.ArrayCollection,this.scroller.addChild(this.list),this.btnClose0=new eui.Image,this.btnClose0.y=815,this.btnClose0.horizontalCenter=0,this.btnClose0.source=ResEntrance.getResSource("close.png"),this.group.addChild(this.btnClose0)},e.prototype.open=function(e){void 0===e&&(e=new ServerListData),this.serverListData=e,this.tab.selectedIndex=0,t.prototype.open.call(this),this.addBg(),this.addItemTapE(this.list,this.onItemClick),this.addItemTapE(this.tab,this.onTabClickChange),this.addClickE(this.btnClose0,this.onClick),this.updateTabList()},e.prototype.onItemClick=function(t){var e=t.item;this.close(),window.platform.updateCurServer(e)},e.prototype.onClick=function(t){switch(t.target){case this.btnClose0:this.close()}},e.prototype.updateTabList=function(){this.tab.dataProvider=new eui.ArrayCollection(this.serverListData.serverTabList),this.updateCurServerList()},e.prototype.updateCurServerList=function(){var t=this.tab.selectedIndex,e=this.serverListData.getServerListByPage(t);this.listCollection.source=e},e.prototype.onTabClickChange=function(t){return __awaiter(this,void 0,void 0,function(){var t,e,r,i,n,o;return __generator(this,function(a){switch(a.label){case 0:return t=this.tab.selectedIndex,e=this.serverListData.getServerTabData(t),e.hasServerList(t)?[3,2]:(r=window.platform.getServerListUrl(e),[4,window.platform.getHttp(r)]);case 1:i=a.sent(),n=JSON.parse(i),o=new ServerTabReturnData,o.copy(n),this.serverListData.setServerListByPage(t,o.serverlist),a.label=2;case 2:return this.updateCurServerList(),[2]}})})},e}(BaseWinEntry);__reflect(ServerListWin.prototype,"ServerListWin"),window.ServerListWin=ServerListWin;var ServerListWinItem=function(t){function e(){var e=t.call(this)||this;return e.width=282,e.height=60,e.imgBg=new eui.Image,e.imgBg.left=e.imgBg.right=e.imgBg.top=e.imgBg.bottom=0,e.imgBg.source=ResEntrance.getResSource("serbg.png"),e.addChild(e.imgBg),e.imgState=new eui.Image,e.imgState.x=19,e.imgState.y=9,e.addChild(e.imgState),e.labelServerName=new eui.Label,e.labelServerName.size=20,e.labelServerName.textColor=16772040,e.labelServerName.horizontalCenter=0,e.labelServerName.fontFamily="黑体",e.labelServerName.x=81,e.labelServerName.verticalCenter=0,e.addChild(e.labelServerName),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.imgState.source=ResEntrance.getResSource(["check_small.png","new_small.png","hot_small.png","check_small.png"][t.server_status]),this.labelServerName.text=t.name},e}(eui.ItemRenderer);__reflect(ServerListWinItem.prototype,"ServerListWinItem"),window.ServerListWinItem=ServerListWinItem;var ServerListWinTabItem=function(t){function e(){var e=t.call(this)||this;e.width=180,e.height=52,e.imgBg=new eui.Image,e.imgBg.source=ResEntrance.getResSource("catebg.png"),e.addChild(e.imgBg),e.imgSelect=new eui.Image,e.imgSelect.source=ResEntrance.getResSource("serbg1.png"),e.imgSelect.visible=!1,e.addChild(e.imgSelect);var r=e.labelDisplay=new eui.Label;return r.size=20,r.textColor=16772040,r.horizontalCenter=-4,r.fontFamily="黑体",r.x=81,r.verticalCenter=0,e.addChild(r),e}return __extends(e,t),e.prototype.dataChanged=function(){var t=this.data;this.labelDisplay.text=t.getTabName()},e.prototype.invalidateState=function(){t.prototype.invalidateState.call(this),this.invalidateProperties()},e.prototype.invalidateProperties=function(){t.prototype.invalidateProperties.call(this),this.selected?this.imgSelect&&(this.imgSelect.visible=!0):this.imgSelect&&(this.imgSelect.visible=!1)},e}(eui.ItemRenderer);__reflect(ServerListWinTabItem.prototype,"ServerListWinTabItem"),window.ServerListWinTabItem=ServerListWinTabItem;var ServerLoadingWin=function(t){function e(){var e=t.call(this)||this;return e.oldIndexDesc=0,e.descs=LangEntry.str7,e.intervalId=0,e.intervalId1=0,e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.imgGongGao=new eui.Image,this.imgGongGao.x=610,this.imgGongGao.top=30,this.imgGongGao.source=ResEntrance.getResSource("notice.png"),this.labelDesc=new eui.Label,this.labelDesc.size=22,this.labelDesc.text="描述",this.labelDesc.fontFamily="黑体",this.labelDesc.horizontalCenter=0,this.labelDesc.top=957,this.labelDesc.textColor=13486270,this.group.addChild(this.labelDesc),this.labelGG1=new eui.Label,this.labelGG1.width=720,this.labelGG1.size=20,this.labelGG1.fontFamily="黑体",this.labelGG1.wordWrap=!0,this.labelGG1.textAlign="center",this.labelGG1.text=LangEntry.str3,this.labelGG1.horizontalCenter=0,this.labelGG1.bottom=15,this.labelGG1.lineSpacing=5,this.group.addChild(this.labelGG1),this.imgDescBg=new eui.Image,this.imgDescBg.source=ResEntrance.getResSource("login_zycs_d.png"),this.imgDescBg.top=757,this.group.addChild(this.imgDescBg),this.labelLoad=new eui.Label,this.labelLoad.size=20,this.labelLoad.fontFamily="黑体",this.labelLoad.text="加载中...",this.labelLoad.horizontalCenter=0,this.labelLoad.top=778,this.labelLoad.lineSpacing=5,this.labelLoad.textColor=13486270,this.group.addChild(this.labelLoad),this.labelLoad1=new eui.Label,this.labelLoad1.size=20,this.labelLoad1.fontFamily="黑体",this.labelLoad1.text="首次加载会比较慢,请耐心等待",this.labelLoad1.horizontalCenter=0,this.labelLoad1.top=869,this.labelLoad1.lineSpacing=5,this.labelLoad1.textColor=13486270,this.group.addChild(this.labelLoad1),this.labelLoad2=new eui.Label,this.labelLoad2.size=20,this.labelLoad2.fontFamily="黑体",this.labelLoad2.text="游戏主程序 加载中...[0%]",this.labelLoad2.horizontalCenter=0,this.labelLoad2.top=894,this.labelLoad2.lineSpacing=5,this.labelLoad2.textColor=13486270,this.group.addChild(this.labelLoad2),this.progressBar1=new eui.ProgressBar;var e=new eui.Image;e.source=ResEntrance.getResSource("login_zycs_y.png"),this.progressBar1.slideDuration=1,this.progressBar1.thumb=e,this.progressBar1.maximum=100,this.progressBar1.value=0,this.progressBar1.top=826,this.progressBar1.addChild(e),this.group.addChild(this.progressBar1),this.progressBar2=new eui.ProgressBar,e=new eui.Image,e.source=ResEntrance.getResSource("login_zycs_g.png"),this.progressBar2.thumb=e,this.progressBar2.maximum=100,this.progressBar2.value=0,this.progressBar2.top=848,this.progressBar2.slideDuration=1,this.progressBar2.addChild(e),this.group.addChild(this.progressBar2)},e.prototype.open=function(){t.prototype.open.call(this),0==this.intervalId&&(this.intervalId=setInterval(this.onInterval.bind(this),2e3),this.onInterval()),this.intervalId1=setInterval(this.onIntervalPro.bind(this),20),this.onIntervalPro()},e.prototype.onInterval=function(){var t=Math.floor(Math.random()*this.descs.length);this.oldIndexDesc!=t?(this.oldIndexDesc=t,this.labelDesc.text=this.descs[t]):this.onInterval()},e.prototype.onIntervalPro=function(){this.progressBar2.value>=100&&(this.progressBar2.value=0,this.onIntervalPro()),this.progressBar2.value=this.progressBar2.value+1},e.prototype.close=function(){t.prototype.close.call(this),clearInterval(this.intervalId),clearInterval(this.intervalId1)},e.prototype.showLoadProgress=function(t,e){this.progressBar1.value=t,this.labelLoad2.text=e+" 加载中...["+t+"%]"},e.prototype.setClickEnable=function(t){this.touchEnabled=this.touchEnabled=!1},e}(BaseWinEntry);__reflect(ServerLoadingWin.prototype,"ServerLoadingWin"),window.ServerLoadingWin=ServerLoadingWin;var ServerTipsWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.group.width=552,this.group.height=488,this.group.verticalCenter=-84,this.imgBg=new eui.Image,this.imgBg.source=ResEntrance.getResSource("tipsbg.jpg"),this.group.addChild(this.imgBg),this.imgTitle=new eui.Image,this.imgTitle.source=ResEntrance.getResSource("tipstitle.png"),this.imgTitle.y=12,this.imgTitle.horizontalCenter=0,this.group.addChild(this.imgTitle),this.labelContent=new eui.Label,this.labelContent.width=456,this.labelContent.height=215,this.labelContent.fontFamily="SimHei",this.labelContent.textAlign="center",this.labelContent.lineSpacing=15,this.labelContent.size=20,this.labelContent.y=98,this.labelContent.verticalAlign=egret.VerticalAlign.MIDDLE,this.labelContent.horizontalCenter=0,this.group.addChild(this.labelContent),this.btnOk=new eui.Image,this.btnOk.source=ResEntrance.getResSource("tipsbtn.png"),this.btnOk.y=362,this.btnOk.horizontalCenter=0,this.group.addChild(this.btnOk)},e.prototype.open=function(e,r,i){void 0===e&&(e=""),void 0===r&&(r=null),void 0===i&&(i=null),t.prototype.open.call(this),this.labelContent.text=e,this.callback=r,this.obj=i,this.addClickE(this.btnOk,this.onClick),this.addBg(.8)},e.prototype.onClick=function(t){switch(t.target){case this.btnOk:this.close()}},e}(BaseWinEntry);__reflect(ServerTipsWin.prototype,"ServerTipsWin"),window.ServerTipsWin=ServerTipsWin;var ServerWin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this),this.imgLogo=new eui.Image,this.imgLogo.left=this.imgLogo.top=10,this.imgLogo.source=ResEntrance.getResSource("logo.png"),this.imgLogo.visible=!1,this.group.addChild(this.imgLogo),this.btnGonggao=new eui.Image,this.btnGonggao.right=40,this.btnGonggao.top=50,this.btnGonggao.source=ResEntrance.getResSource("notice.png"),this.group.addChild(this.btnGonggao),this.groupServer=new eui.Group,this.groupServer.horizontalCenter=0,this.groupServer.bottom=360,this.group.addChild(this.groupServer),this.imgServerDi=new eui.Image,this.imgServerDi.source=ResEntrance.getResSource("curbg.png"),this.groupServer.addChild(this.imgServerDi),this.imgState=new eui.Image,this.imgState.x=49,this.imgState.verticalCenter=0,this.imgState.source=ResEntrance.getResSource("check_small.png"),this.groupServer.addChild(this.imgState),this.labelServerName=new eui.Label,this.labelServerName.size=24,this.labelServerName.fontFamily="黑体",this.labelServerName.horizontalCenter=-18,this.labelServerName.verticalCenter=0,this.labelServerName.text=LangEntry.str1,this.groupServer.addChild(this.labelServerName),this.btnSelectServer=new eui.Image,this.btnSelectServer.x=327,this.btnSelectServer.verticalCenter=0,this.btnSelectServer.source=ResEntrance.getResSource("djxf.png"),this.groupServer.addChild(this.btnSelectServer),this.labelWeihu=new eui.Label,this.labelWeihu.size=30,this.labelWeihu.textColor=16751375,this.labelWeihu.text=LangEntry.str2,this.labelWeihu.horizontalCenter=0,this.labelWeihu.fontFamily="黑体",this.labelWeihu.bottom=305,this.group.addChild(this.labelWeihu),this.labelGG1=new eui.Label,this.labelGG1.width=720,this.labelGG1.size=20,this.labelGG1.fontFamily="黑体",this.labelGG1.textAlign="center",this.labelGG1.horizontalCenter=0,this.labelGG1.lineSpacing=5,this.labelGG1.validateNow(),this.group.addChild(this.labelGG1),this.btnStartGame=new eui.Image,this.btnStartGame.horizontalCenter=0,this.btnStartGame.bottom=180,this.btnStartGame.source=ResEntrance.getResSource("start.png"),this.group.addChild(this.btnStartGame)},e.prototype.open=function(e,r,i){return void 0===r&&(r=null),void 0===i&&(i=null),__awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(o){return t.prototype.open.call(this),n="",n=window.platform.isShowISBN()?LangEntry.str3+LangEntry.str4:LangEntry.str3,this.labelGG1.text=n,this.updateGGXY(),this.imgLogo.visible=window.platform.isShowLogo(),this.serverListData=e,this.callback=r,this.callbackObj=i,this.addClickE(this,this.onClick),this.updateCurServer(this.serverListData.defaultserver),1==window.gonggao&&this.openGongGao(),[2]})})},e.prototype.updateServerList=function(t){this.serverListData=t,this.updateCurServer(this.serverListData.defaultserver)},e.prototype.updateGGXY=function(){this.labelGG1.validateNow(),this.labelGG1.bottom=15+(this.stage.stageHeight>this.group.height?Math.max(this.group.height-this.stage.stageHeight,-this.labelGG1.height):0)},e.prototype.updateCurServer=function(t){t&&(this.selectData=t,this.labelServerName.text=this.selectData.name,this.imgState.source=ResEntrance.getResSource(["check.png","new.png","hot.png","check.png"][this.selectData.server_status])),this.selectData.isWeihu?(this.btnStartGame.visible=!1,this.labelWeihu.visible=!0):(this.btnStartGame.visible=!0,this.labelWeihu.visible=!1)},e.prototype.setClickEnable=function(t){this.touchEnabled=this.touchChildren=t},e.prototype.onClick=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(r){switch(t.target){case this.btnStartGame:if("1"==EntranceParam.urlParam.isBan)return alert(LangEntry.str5),[2];if(this.selectData.isWeihu)return alert(LangEntry.str6),[2];window.platform.checkStartGame()&&(this.callback&&this.callbackObj&&this.callback.call(this.callbackObj,this.selectData),this.setClickEnable(!1));break;case this.btnGonggao:this.openGongGao();break;case this.btnSelectServer:e=new ServerListWin,this.addChild(e),e.open(this.serverListData)}return[2]})})},e.prototype.openGongGao=function(){return __awaiter(this,void 0,void 0,function(){var t,e,r,i,n,o;return __generator(this,function(a){switch(a.label){case 0:return this.ggwin||(this.ggwin=new ServerGonggaoWin),this.addChild(this.ggwin),this.ggwin.open(""),t=window.platform.getGonggaoUrl(),e=LangEntry.str10,t&&""!=t?[4,window.platform.getHttp(t)]:[3,2];case 1:for(r=a.sent(),i=JSON.parse(r),n=i.notice,n&&""!=n&&(e=decodeURIComponent(n)),o=0;e.indexOf("\\n")>-1||o>100;)e=e.replace("\\n","\n"),o++;a.label=2;case 2:return this.ggwin.open(e),[2]}})})},e}(BaseWinEntry);__reflect(ServerWin.prototype,"ServerWin"),window.ServerWin=ServerWin;var md5=function(){function t(){}return t.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.any_hmac_md5=function(t,e,r){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),r)},t.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.rstr_hmac_md5=function(t,e){var r=this.rstr2binl(t);r.length>16&&(r=this.binl_md5(r,8*t.length));for(var i=Array(16),n=Array(16),o=0;16>o;o++)i[o]=909522486^r[o],n[o]=1549556828^r[o];var a=this.binl_md5(i.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(n.concat(a),640))},t.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var r,i=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",o=0;o<t.length;o++)r=t.charCodeAt(o),n+=i.charAt(r>>>4&15)+i.charAt(15&r);return n},t.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",n=t.length,o=0;n>o;o+=3)for(var a=t.charCodeAt(o)<<16|(n>o+1?t.charCodeAt(o+1)<<8:0)|(n>o+2?t.charCodeAt(o+2):0),s=0;4>s;s++)i+=8*o+6*s>8*t.length?this.b64pad:r.charAt(a>>>6*(3-s)&63);return i},t.rstr2any=function(t,e){var r,i,n,o,a,s=e.length,l=Array(Math.ceil(t.length/2));for(r=0;r<l.length;r++)l[r]=t.charCodeAt(2*r)<<8|t.charCodeAt(2*r+1);var c=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),h=Array(c);for(i=0;c>i;i++){for(a=Array(),o=0,r=0;r<l.length;r++)o=(o<<16)+l[r],n=Math.floor(o/s),o-=n*s,(a.length>0||n>0)&&(a[a.length]=n);h[i]=o,l=a}var u="";for(r=h.length-1;r>=0;r--)u+=e.charAt(h[r]);return u},t.str2rstr_utf8=function(t){for(var e,r,i="",n=-1;++n<t.length;)e=t.charCodeAt(n),r=n+1<t.length?t.charCodeAt(n+1):0,e>=55296&&56319>=e&&r>=56320&&57343>=r&&(e=65536+((1023&e)<<10)+(1023&r),n++),127>=e?i+=String.fromCharCode(e):2047>=e?i+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?i+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(i+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return i},t.str2rstr_utf16le=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(255&t.charCodeAt(r),t.charCodeAt(r)>>>8&255);return e},t.str2rstr_utf16be=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t.charCodeAt(r)>>>8&255,255&t.charCodeAt(r));return e},t.rstr2binl=function(t){for(var e=Array(t.length>>2),r=0;r<e.length;r++)e[r]=0;for(var r=0;r<8*t.length;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return e},t.binl2rstr=function(t){for(var e="",r=0;r<32*t.length;r+=8)e+=String.fromCharCode(t[r>>5]>>>r%32&255);return e},t.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var r=1732584193,i=-271733879,n=-1732584194,o=271733878,a=0;a<t.length;a+=16){var s=r,l=i,c=n,h=o;r=this.md5_ff(r,i,n,o,t[a+0],7,-680876936),o=this.md5_ff(o,r,i,n,t[a+1],12,-389564586),n=this.md5_ff(n,o,r,i,t[a+2],17,606105819),i=this.md5_ff(i,n,o,r,t[a+3],22,-1044525330),r=this.md5_ff(r,i,n,o,t[a+4],7,-176418897),o=this.md5_ff(o,r,i,n,t[a+5],12,1200080426),n=this.md5_ff(n,o,r,i,t[a+6],17,-1473231341),i=this.md5_ff(i,n,o,r,t[a+7],22,-45705983),r=this.md5_ff(r,i,n,o,t[a+8],7,1770035416),o=this.md5_ff(o,r,i,n,t[a+9],12,-1958414417),n=this.md5_ff(n,o,r,i,t[a+10],17,-42063),i=this.md5_ff(i,n,o,r,t[a+11],22,-1990404162),r=this.md5_ff(r,i,n,o,t[a+12],7,1804603682),o=this.md5_ff(o,r,i,n,t[a+13],12,-40341101),n=this.md5_ff(n,o,r,i,t[a+14],17,-1502002290),i=this.md5_ff(i,n,o,r,t[a+15],22,1236535329),r=this.md5_gg(r,i,n,o,t[a+1],5,-165796510),o=this.md5_gg(o,r,i,n,t[a+6],9,-1069501632),n=this.md5_gg(n,o,r,i,t[a+11],14,643717713),i=this.md5_gg(i,n,o,r,t[a+0],20,-373897302),r=this.md5_gg(r,i,n,o,t[a+5],5,-701558691),o=this.md5_gg(o,r,i,n,t[a+10],9,38016083),n=this.md5_gg(n,o,r,i,t[a+15],14,-660478335),i=this.md5_gg(i,n,o,r,t[a+4],20,-405537848),r=this.md5_gg(r,i,n,o,t[a+9],5,568446438),o=this.md5_gg(o,r,i,n,t[a+14],9,-1019803690),n=this.md5_gg(n,o,r,i,t[a+3],14,-187363961),i=this.md5_gg(i,n,o,r,t[a+8],20,1163531501),r=this.md5_gg(r,i,n,o,t[a+13],5,-1444681467),o=this.md5_gg(o,r,i,n,t[a+2],9,-51403784),n=this.md5_gg(n,o,r,i,t[a+7],14,1735328473),i=this.md5_gg(i,n,o,r,t[a+12],20,-1926607734),r=this.md5_hh(r,i,n,o,t[a+5],4,-378558),o=this.md5_hh(o,r,i,n,t[a+8],11,-2022574463),n=this.md5_hh(n,o,r,i,t[a+11],16,1839030562),i=this.md5_hh(i,n,o,r,t[a+14],23,-35309556),r=this.md5_hh(r,i,n,o,t[a+1],4,-1530992060),o=this.md5_hh(o,r,i,n,t[a+4],11,1272893353),n=this.md5_hh(n,o,r,i,t[a+7],16,-155497632),i=this.md5_hh(i,n,o,r,t[a+10],23,-1094730640),r=this.md5_hh(r,i,n,o,t[a+13],4,681279174),o=this.md5_hh(o,r,i,n,t[a+0],11,-358537222),n=this.md5_hh(n,o,r,i,t[a+3],16,-722521979),i=this.md5_hh(i,n,o,r,t[a+6],23,76029189),r=this.md5_hh(r,i,n,o,t[a+9],4,-640364487),o=this.md5_hh(o,r,i,n,t[a+12],11,-421815835),n=this.md5_hh(n,o,r,i,t[a+15],16,530742520),i=this.md5_hh(i,n,o,r,t[a+2],23,-995338651),r=this.md5_ii(r,i,n,o,t[a+0],6,-198630844),o=this.md5_ii(o,r,i,n,t[a+7],10,1126891415),n=this.md5_ii(n,o,r,i,t[a+14],15,-1416354905),i=this.md5_ii(i,n,o,r,t[a+5],21,-57434055),r=this.md5_ii(r,i,n,o,t[a+12],6,1700485571),o=this.md5_ii(o,r,i,n,t[a+3],10,-1894986606),n=this.md5_ii(n,o,r,i,t[a+10],15,-1051523),i=this.md5_ii(i,n,o,r,t[a+1],21,-2054922799),r=this.md5_ii(r,i,n,o,t[a+8],6,1873313359),o=this.md5_ii(o,r,i,n,t[a+15],10,-30611744),n=this.md5_ii(n,o,r,i,t[a+6],15,-1560198380),i=this.md5_ii(i,n,o,r,t[a+13],21,1309151649),r=this.md5_ii(r,i,n,o,t[a+4],6,-145523070),o=this.md5_ii(o,r,i,n,t[a+11],10,-1120210379),n=this.md5_ii(n,o,r,i,t[a+2],15,718787259),i=this.md5_ii(i,n,o,r,t[a+9],21,-343485551),r=this.safe_add(r,s),i=this.safe_add(i,l),n=this.safe_add(n,c),o=this.safe_add(o,h)
}return[r,i,n,o]},t.md5_cmn=function(t,e,r,i,n,o){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(i,o)),n),r)},t.md5_ff=function(t,e,r,i,n,o,a){return this.md5_cmn(e&r|~e&i,t,e,n,o,a)},t.md5_gg=function(t,e,r,i,n,o,a){return this.md5_cmn(e&i|r&~i,t,e,n,o,a)},t.md5_hh=function(t,e,r,i,n,o,a){return this.md5_cmn(e^r^i,t,e,n,o,a)},t.md5_ii=function(t,e,r,i,n,o,a){return this.md5_cmn(r^(e|~i),t,e,n,o,a)},t.safe_add=function(t,e){var r=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(r>>16);return i<<16|65535&r},t.bit_rol=function(t,e){return t<<e|t>>>32-e},t.hexcase=0,t.b64pad="",t}();__reflect(md5.prototype,"md5"),window.md5=md5;var StringUtil=function(){function t(){}return t.getSingleTextFlow1=function(t){for(var e,r,i="<font",n=t.split("&"),o=0,a=n.length;a>o;o++)e=n[o].split(":"),e[0]==this.PROP_TEXT?r=e[1]:e[0]==this.STYLE_SIZE?i+=' size="'+parseInt(e[1])+'"':e[0]==this.STYLE_COLOR?i+=' color="'+parseInt(e[1])+'"':r=e[0];return i+=">"+r+"</font>"},t.toTF=function(e){e||(e="");for(var r=e.split("|"),i="",n=0,o=r.length;o>n;n++)i+=t.getSingleTextFlow1(r[n]);return(new egret.HtmlTextParser).parser(i)},t.STYLE_COLOR="C",t.STYLE_SIZE="S",t.PROP_TEXT="T",t}();__reflect(StringUtil.prototype,"StringUtil"),window.StringUtil=StringUtil;